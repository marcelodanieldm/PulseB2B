<!-- Exclusive Access User Dashboard (SPA Section) -->
    <section id="exclusive-dashboard" class="max-w-3xl mx-auto mt-24 px-4 hidden">
      <h2 class="text-2xl font-bold text-zinc-100 mb-8">Mi Panel de Servicios</h2>
      <div id="user-services-list" class="space-y-6">
        <!-- Servicios contratados y no contratados se renderizan aquí -->
        <!-- Ejemplo de servicio contratado -->
        <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-6 flex flex-col md:flex-row md:items-center gap-4">
          <div class="flex-1">
            <h3 class="text-lg font-semibold text-zinc-200">Dashboard Pro <span class="ml-2 px-2 py-0.5 rounded bg-green-700 text-xs text-white">Contratado</span></h3>
            <p class="text-zinc-400 text-sm mt-1">Acceso total a la base de datos, filtros avanzados y exportación CSV.</p>
            <div class="mt-2 text-zinc-300 text-sm">Tu enlace de acceso: <a href="#dashboard" class="text-indigo-400 underline">Ir al Dashboard</a></div>
          </div>
          <button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition text-sm" id="unsubscribe-dashboard-pro">Desuscribirse</button>
        </div>
        <!-- Ejemplo de servicio NO contratado -->
        <div class="bg-zinc-900/40 border border-zinc-800 rounded-2xl p-6 flex flex-col md:flex-row md:items-center gap-4 opacity-70">
          <div class="flex-1">
            <h3 class="text-lg font-semibold text-zinc-200">Custom Alert API <span class="ml-2 px-2 py-0.5 rounded bg-zinc-700 text-xs text-white">No contratado</span></h3>
            <p class="text-zinc-400 text-sm mt-1">Webhooks directos a Slack o CRM. Automatización avanzada.</p>
          </div>
          <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition text-sm" id="upgrade-custom-api">Upgrade</button>
        </div>
      </div>
      <div class="mt-10 flex justify-end">
        <button id="logout-btn" class="bg-zinc-700 hover:bg-zinc-800 text-zinc-200 px-4 py-2 rounded-lg transition">Logout</button>
      </div>
    </section
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PulseB2B</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen" id="main-body">
  <div class="max-w-3xl mx-auto py-8 px-4">
        <!-- Login Page (Minimalist, Supabase Auth UI) -->
        <div id="login-page" class="fixed inset-0 flex items-center justify-center bg-zinc-950 z-50 hidden">
          <div class="bg-zinc-900 rounded-xl shadow-lg p-8 w-full max-w-sm flex flex-col items-center gap-6">
            <h2 class="text-2xl font-bold text-zinc-100 mb-2">Inicia sesión</h2>
            <form id="login-form" class="w-full flex flex-col gap-4">
              <input id="login-email" type="email" required placeholder="Email" class="w-full px-4 py-2 rounded bg-zinc-800 text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-indigo-600" />
              <input id="login-password" type="password" required placeholder="Contraseña" class="w-full px-4 py-2 rounded bg-zinc-800 text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-indigo-600" />
              <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 rounded transition">Entrar</button>
            </form>
            <div class="w-full flex flex-col gap-2 mt-2">
              <button id="google-login" class="w-full bg-white text-zinc-900 font-semibold py-2 rounded flex items-center justify-center gap-2 border border-zinc-700 hover:bg-zinc-100 transition"><img src="https://www.svgrepo.com/show/475656/google-color.svg" alt="Google" class="w-5 h-5"> Iniciar con Google</button>
            </div>
            <div id="login-error" class="text-red-500 text-sm hidden"></div>
          </div>
        </div>
    <!-- Onboarding View -->
    <div id="onboarding-view" class="min-h-[80vh] flex flex-col justify-center items-center hidden">
      <!-- Progress Bar -->
      <div class="w-full max-w-lg mb-10">
        <div class="h-1 bg-zinc-800 rounded overflow-hidden">
          <div id="onboarding-progress" class="h-1 bg-indigo-500 transition-all duration-500" style="width:33%"></div>
        </div>
      </div>
      <div class="w-full max-w-lg text-center">
        <h1 class="text-2xl font-bold mb-8 text-zinc-800">¿Cuál es tu rol principal?</h1>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Persona Card: Software Agency -->
          <button class="onboarding-card group border border-zinc-200 rounded-xl p-6 flex flex-col items-center gap-4 bg-white hover:border-indigo-500/50 transition" data-persona="agency">
            <span class="lucide" data-icon="briefcase" aria-hidden="true"></span>
            <span class="font-semibold text-lg">Software Agency</span>
            <span class="text-zinc-500 text-sm">Consigue leads de empresas que buscan partners tecnológicos.</span>
          </button>
          <!-- Persona Card: IT Recruiter -->
          <button class="onboarding-card group border border-zinc-200 rounded-xl p-6 flex flex-col items-center gap-4 bg-white hover:border-indigo-500/50 transition" data-persona="recruiter">
            <span class="lucide" data-icon="users" aria-hidden="true"></span>
            <span class="font-semibold text-lg">IT Recruiter</span>
            <span class="text-zinc-500 text-sm">Accede a empresas con alta rotación y mandatos urgentes.</span>
          </button>
          <!-- Persona Card: Tech Sales/SaaS -->
          <button class="onboarding-card group border border-zinc-200 rounded-xl p-6 flex flex-col items-center gap-4 bg-white hover:border-indigo-500/50 transition" data-persona="saas">
            <span class="lucide" data-icon="dollar-sign" aria-hidden="true"></span>
            <span class="font-semibold text-lg">Tech Sales/SaaS</span>
            <span class="text-zinc-500 text-sm">Identifica cuentas listas para comprar soluciones tecnológicas.</span>
          </button>
        </div>
      </div>
    </div>
    <!-- Persona Selection Modal -->
    <div id="persona-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-lg shadow-lg p-8 max-w-md w-full flex flex-col items-center">
        <h2 class="text-xl font-bold mb-6 text-center">¿Para qué usarás la plataforma?</h2>
        <div class="flex flex-col gap-4 w-full">
          <button class="persona-btn bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition w-full" data-persona="dev">Quiero vender servicios Dev</button>
          <button class="persona-btn bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition w-full" data-persona="recruit">Quiero encontrar candidatos</button>
          <button class="persona-btn bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 transition w-full" data-persona="tools">Quiero vender herramientas Tech</button>
        </div>
      </div>
    </div>
    <nav class="mb-8">
      <ul class="flex justify-center gap-2 border-b border-gray-200">
        <li><a href="#radar" class="tab-link px-4 py-2 text-gray-600 hover:text-indigo-500 border-b-2 border-transparent hover:border-indigo-500 transition" data-tab="radar">Radar</a></li>
        <li><a href="#dashboard" class="tab-link px-4 py-2 text-gray-600 hover:text-indigo-500 border-b-2 border-transparent hover:border-indigo-500 transition" data-tab="dashboard">Dashboard</a></li>
        <li><a href="#settings-api" class="tab-link px-4 py-2 text-gray-600 hover:text-indigo-500 border-b-2 border-transparent hover:border-indigo-500 transition" data-tab="settings-api">API Console</a></li>
        <li id="admin-tab-link" class="hidden"><a href="#admin-intel" class="tab-link px-4 py-2 text-gray-600 hover:text-blue-600 border-b-2 border-transparent hover:border-blue-500 transition" data-tab="admin-intel">Admin</a></li>
          <!-- Superuser Login Modal -->
          <div id="superuser-login-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-lg shadow-lg p-8 max-w-xs w-full flex flex-col items-center">
              <h2 class="text-xl font-bold mb-4 text-center">Superuser Login</h2>
              <input id="superuser-password" type="password" class="w-full rounded border border-gray-300 px-3 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="Password" />
              <button id="superuser-login-btn" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition w-full font-semibold">Login</button>
              <div id="superuser-login-error" class="text-red-600 text-sm mt-2 hidden">Incorrect password</div>
            </div>
          </div>
      </ul>
    </nav>
    <div>
      <div id="tareas" class="tab-content-section">
        <h1 class="text-2xl font-bold mb-6 text-center text-gray-800">Gestión de Tareas</h1>
        <form class="mb-6 flex gap-2" id="task-form">
          <input id="task-input" type="text" class="flex-1 rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Nueva tarea" />
          <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition" type="submit">Agregar</button>
        </form>
        <div id="task-loading" class="text-center my-4" style="display:none">
          <span class="text-blue-600">Cargando tareas...</span>
        </div>
        <div id="task-error" class="text-center my-4 text-red-600" style="display:none"></div>
        <div class="overflow-x-auto rounded shadow">
          <table class="min-w-full text-sm text-left bg-white" id="task-table">
            <thead class="bg-gray-100">
              <tr>
                <th class="px-4 py-2">#</th>
                <th class="px-4 py-2">Tarea</th>
                <th class="px-4 py-2">Completada</th>
                <th class="px-4 py-2">Acciones</th>
              </tr>
            </thead>
            <tbody id="task-tbody"></tbody>
          </table>
        </div>
      </div>
      <div id="usuarios" class="tab-content-section hidden">
        <h2 class="text-xl font-semibold mb-6 text-center text-gray-800">Usuarios</h2>
        <form class="mb-6 flex flex-col sm:flex-row gap-2" id="user-form">
          <input id="user-name" type="text" class="flex-1 rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Nombre" />
          <input id="user-email" type="email" class="flex-1 rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Email" />
          <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition" type="submit">Agregar usuario</button>
        </form>
        <div id="user-loading" class="text-center my-4" style="display:none">
          <span class="text-blue-600">Cargando usuarios...</span>
        </div>
        <div id="user-error" class="text-center my-4 text-red-600" style="display:none"></div>
        <div class="overflow-x-auto rounded shadow">
          <table class="min-w-full text-sm text-left bg-white" id="user-table">
            <thead class="bg-gray-100">
              <tr>
                <th class="px-4 py-2">ID</th>
                <th class="px-4 py-2">Nombre</th>
                <th class="px-4 py-2">Email</th>
                <th class="px-4 py-2">Acciones</th>
              </tr>
            </thead>
            <tbody id="user-tbody"></tbody>
          </table>
        </div>
      </div>
      <div id="dashboard" class="tab-content-section hidden">
        <!-- Lead Dossier View (hidden by default) -->
        <div id="lead-dossier-view" class="hidden min-h-[80vh] flex flex-col items-center justify-center py-12">
          <div class="w-full max-w-2xl mx-auto">
            <!-- Header -->
            <div class="flex flex-col sm:flex-row items-center justify-between gap-8 mb-10">
              <div>
                <h2 id="dossier-company" class="text-3xl font-bold tracking-tight text-zinc-900 dark:text-zinc-100 mb-2">Acme Corp</h2>
                <div id="dossier-hq" class="text-zinc-500 text-lg tracking-tight">San Francisco, CA</div>
              </div>
              <div class="flex flex-col items-center">
                <span class="text-zinc-500 text-sm mb-2">Hiring Probability</span>
                <svg id="dossier-hiring-svg" width="96" height="96" viewBox="0 0 96 96" class="block">
                  <circle cx="48" cy="48" r="42" fill="none" stroke="#e5e7eb" stroke-width="8" />
                  <circle id="dossier-hiring-bar" cx="48" cy="48" r="42" fill="none" stroke="#6366f1" stroke-width="8" stroke-linecap="round" stroke-dasharray="264" stroke-dashoffset="0" transform="rotate(-90 48 48)" />
                  <text id="dossier-hiring-score" x="50%" y="54%" text-anchor="middle" fill="#18181b" font-size="2rem" font-family="inherit" font-weight="bold">85</text>
                </svg>
              </div>
            </div>
            <!-- Bento Sections -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
              <!-- Tech Stack -->
              <div class="bg-white dark:bg-zinc-900 rounded-xl p-6 flex flex-col gap-4 shadow">
                <div class="font-semibold text-zinc-800 dark:text-zinc-200 tracking-tight mb-2">Tech Stack</div>
                <div id="dossier-techstack" class="flex flex-wrap gap-2"></div>
              </div>
              <!-- Growth Signals -->
              <div class="bg-white dark:bg-zinc-900 rounded-xl p-6 flex flex-col gap-4 shadow">
                <div class="font-semibold text-zinc-800 dark:text-zinc-200 tracking-tight mb-2">Growth Signals</div>
                <div id="dossier-growth" class="text-zinc-600 dark:text-zinc-300 text-sm tracking-tight leading-relaxed"></div>
              </div>
              <!-- Financials -->
              <div class="bg-white dark:bg-zinc-900 rounded-xl p-6 flex flex-col gap-4 shadow md:col-span-2">
                <div class="font-semibold text-zinc-800 dark:text-zinc-200 tracking-tight mb-2">Financials</div>
                <table class="w-full text-sm">
                  <thead>
                    <tr class="text-zinc-500">
                      <th class="py-1 pr-4 text-left">Date</th>
                      <th class="py-1 pr-4 text-left">Round</th>
                      <th class="py-1 pr-4 text-left">Amount</th>
                    </tr>
                  </thead>
                  <tbody id="dossier-financials"></tbody>
                </table>
              </div>
            </div>
            <!-- Gated Contact Section -->
            <div class="w-full flex justify-center">
              <div id="dossier-contact" class="relative bg-white dark:bg-zinc-900 rounded-xl p-8 shadow w-full max-w-md flex flex-col items-center">
                <div class="font-semibold text-zinc-800 dark:text-zinc-200 tracking-tight mb-2">Contact Info</div>
                <div id="dossier-contact-content" class="w-full flex flex-col items-center"></div>
                <div id="dossier-contact-blur" class="absolute inset-0 rounded-xl backdrop-blur-md bg-white/70 dark:bg-zinc-900/70 flex flex-col items-center justify-center" style="display:none;">
                  <button id="dossier-unlock-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold shadow hover:bg-indigo-700 transition">Unlock Contact Details</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <h1 class="text-2xl font-bold mb-6 text-center text-gray-800">Dashboard</h1>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8">
          <div class="bg-blue-500 text-white rounded shadow p-6 flex flex-col items-center">
            <div class="text-lg font-semibold card-title">Tareas</div>
            <div class="text-4xl font-bold my-2" id="dashboard-tasks-count">0</div>
            <div class="text-sm">Acceso rápido a la gestión de tareas.</div>
          </div>
          <div class="bg-green-500 text-white rounded shadow p-6 flex flex-col items-center">
            <div class="text-lg font-semibold card-title">Usuarios</div>
            <div class="text-4xl font-bold my-2" id="dashboard-users-count">0</div>
            <div class="text-sm">Ver y administrar usuarios.</div>
          </div>
        </div>
        <!-- Persona-based Table Example -->
        <div class="overflow-x-auto rounded shadow mb-6">
          <table class="min-w-full text-sm text-left bg-white" id="persona-table">
            <thead class="bg-gray-100">
              <tr id="persona-table-header"></tr>
            </thead>
            <tbody id="persona-table-body"></tbody>
          </table>
        </div>
        <!-- Persona-based CTA -->
        <div id="paywall-cta" class="bg-yellow-100 text-yellow-900 px-4 py-3 rounded text-center font-semibold"></div>
      </div>
      <div id="admin-intel" class="tab-content-section hidden">
        <div class="max-w-5xl mx-auto py-8 flex flex-col gap-10">
          <div class="flex items-center justify-between mb-4">
            <h1 class="text-2xl font-bold tracking-tight">Superuser Admin Dashboard</h1>
            <div class="flex gap-2">
              <button id="superuser-change-btn" class="bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-200 px-3 py-1 rounded-lg font-semibold shadow hover:bg-zinc-200 dark:hover:bg-zinc-700 transition text-sm">Change Password</button>
              <button id="superuser-logout-btn" class="bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-200 px-3 py-1 rounded-lg font-semibold shadow hover:bg-zinc-200 dark:hover:bg-zinc-700 transition text-sm">Logout</button>
            </div>
              <!-- Superuser Password Change/Recovery Modal -->
              <div id="superuser-password-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
                <div class="bg-white rounded-lg shadow-lg p-8 max-w-xs w-full flex flex-col items-center">
                  <h2 class="text-xl font-bold mb-4 text-center">Change/Recover Password</h2>
                  <input id="superuser-old-password" type="password" class="w-full rounded border border-gray-300 px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="Current Password (or leave blank to recover)" />
                  <input id="superuser-new-password" type="password" class="w-full rounded border border-gray-300 px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="New Password" />
                  <input id="superuser-confirm-password" type="password" class="w-full rounded border border-gray-300 px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="Confirm New Password" />
                  <button id="superuser-password-save" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition w-full font-semibold mb-2">Save</button>
                  <button id="superuser-password-cancel" class="bg-zinc-200 text-zinc-700 px-4 py-2 rounded hover:bg-zinc-300 transition w-full font-semibold">Cancel</button>
                  <div id="superuser-password-msg" class="text-center text-sm mt-2 hidden"></div>
                </div>
              </div>
          </div>
              // Superuser logout logic with visual feedback
              const logoutBtn = document.getElementById('superuser-logout-btn');
              if (logoutBtn) {
                logoutBtn.onclick = function() {
                  localStorage.removeItem('superuser-auth');
                  hideSuperuserTab();
                  // Visual feedback
                  const msg = document.createElement('div');
                  msg.textContent = 'Sesión cerrada correctamente.';
                  msg.className = 'fixed top-6 left-1/2 -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded shadow-lg z-50 animate-bounce';
                  document.body.appendChild(msg);
                  setTimeout(() => { msg.remove(); }, 2000);
                  // Redirect to dashboard or first tab
                  document.querySelector('.tab-link[data-tab="dashboard"]').click();
                };
              }

              // Superuser password change/recovery logic
              let superuserPassword = localStorage.getItem('superuser-password') || 'supersecret';
              document.getElementById('superuser-change-btn').onclick = function() {
                document.getElementById('superuser-password-modal').classList.remove('hidden');
                document.getElementById('superuser-old-password').value = '';
                document.getElementById('superuser-new-password').value = '';
                document.getElementById('superuser-confirm-password').value = '';
                document.getElementById('superuser-password-msg').classList.add('hidden');
              };
              document.getElementById('superuser-password-cancel').onclick = function() {
                document.getElementById('superuser-password-modal').classList.add('hidden');
              };
              document.getElementById('superuser-password-save').onclick = function() {
                const oldPass = document.getElementById('superuser-old-password').value;
                const newPass = document.getElementById('superuser-new-password').value;
                const confirmPass = document.getElementById('superuser-confirm-password').value;
                const msg = document.getElementById('superuser-password-msg');
                msg.classList.remove('hidden');
                // Recovery: if oldPass blank, allow reset
                if (!oldPass) {
                  if (!newPass || newPass.length < 6) {
                    msg.textContent = 'Nueva contraseña muy corta.';
                    msg.className = 'text-red-600 text-sm mt-2 text-center';
                    return;
                  }
                  if (newPass !== confirmPass) {
                    msg.textContent = 'Las contraseñas no coinciden.';
                    msg.className = 'text-red-600 text-sm mt-2 text-center';
                    return;
                  }
                  superuserPassword = newPass;
                  localStorage.setItem('superuser-password', newPass);
                  msg.textContent = 'Contraseña restablecida correctamente.';
                  msg.className = 'text-green-600 text-sm mt-2 text-center';
                  setTimeout(() => {
                    document.getElementById('superuser-password-modal').classList.add('hidden');
                  }, 1200);
                  return;
                }
                // Normal change
                if (oldPass !== superuserPassword) {
                  msg.textContent = 'Contraseña actual incorrecta.';
                  msg.className = 'text-red-600 text-sm mt-2 text-center';
                  return;
                }
                if (!newPass || newPass.length < 6) {
                  msg.textContent = 'Nueva contraseña muy corta.';
                  msg.className = 'text-red-600 text-sm mt-2 text-center';
                  return;
                }
                if (newPass !== confirmPass) {
                  msg.textContent = 'Las contraseñas no coinciden.';
                  msg.className = 'text-red-600 text-sm mt-2 text-center';
                  return;
                }
                superuserPassword = newPass;
                localStorage.setItem('superuser-password', newPass);
                msg.textContent = 'Contraseña cambiada correctamente.';
                msg.className = 'text-green-600 text-sm mt-2 text-center';
                setTimeout(() => {
                  document.getElementById('superuser-password-modal').classList.add('hidden');
                }, 1200);
              };
          <!-- Real-time Sales Feed -->
          <div>
            <div class="font-semibold text-zinc-800 dark:text-zinc-200 tracking-tight mb-2">Real-time Sales Feed</div>
            <div id="sales-feed" class="flex flex-col gap-4 border-l-2 border-indigo-500 pl-6">
              <!-- Timeline items injected by JS -->
            </div>
          </div>
          <!-- Attribution Metrics -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white dark:bg-zinc-900 rounded-xl shadow p-6 flex flex-col gap-6">
              <div class="font-semibold text-zinc-800 dark:text-zinc-200 tracking-tight mb-2">Sales by Origin</div>
              <div id="sales-origin-chart" class="w-full h-48"></div>
            </div>
            <div class="bg-white dark:bg-zinc-900 rounded-xl shadow p-6 flex flex-col gap-6">
              <div class="font-semibold text-zinc-800 dark:text-zinc-200 tracking-tight mb-2">Sales by Hour</div>
              <div id="sales-hour-chart" class="w-full h-48"></div>
            </div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-8">
            <div class="bg-white dark:bg-zinc-900 rounded-xl shadow p-6 flex flex-col items-center gap-2">
              <div class="text-zinc-500 text-sm">Conversion Rate</div>
              <div id="conversion-rate" class="text-4xl font-bold text-indigo-600">--%</div>
            </div>
            <div class="bg-white dark:bg-zinc-900 rounded-xl shadow p-6 flex flex-col gap-2 md:col-span-2">
              <div class="font-semibold text-zinc-800 dark:text-zinc-200 tracking-tight mb-2">Regional Performance</div>
              <ol id="regional-performance" class="list-decimal pl-6 text-zinc-700 dark:text-zinc-200"></ol>
            </div>
          </div>
        </div>
      </div>
        <div class="max-w-2xl mx-auto py-8 flex flex-col gap-10">
          <!-- Current Plan Card -->
          <div class="bg-white dark:bg-zinc-900 rounded-xl shadow p-6 flex flex-col sm:flex-row items-center justify-between gap-6">
            <div>
              <div class="text-zinc-500 text-sm mb-1 tracking-tight">Current Plan</div>
              <div class="flex items-center gap-3">
                <span id="plan-name" class="text-xl font-bold tracking-tight">Starter</span>
                <span id="plan-status" class="relative flex h-5 w-5">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-5 w-5 bg-green-500"></span>
                </span>
                <span class="text-green-600 font-semibold text-sm">Active</span>
              </div>
            </div>
            <button class="bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-200 px-4 py-2 rounded-lg font-semibold shadow hover:bg-zinc-200 dark:hover:bg-zinc-700 transition">Manage Subscription</button>
          </div>
          <!-- Pricing Comparison -->
          <div>
            <div class="flex items-center justify-center gap-4 mb-6">
              <span class="text-zinc-500 text-sm">Monthly</span>
              <button id="billing-toggle" class="relative w-12 h-6 bg-zinc-200 dark:bg-zinc-800 rounded-full flex items-center transition">
                <span id="billing-toggle-knob" class="absolute left-1 top-1 w-4 h-4 bg-white dark:bg-zinc-600 rounded-full shadow transition"></span>
              </button>
              <span class="text-zinc-500 text-sm">Yearly</span>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Starter Card -->
              <div class="bg-white dark:bg-zinc-900 rounded-xl shadow p-6 flex flex-col items-center gap-4 border border-zinc-200 dark:border-zinc-800">
                <div class="text-lg font-bold tracking-tight">Starter</div>
                <div class="text-3xl font-bold text-zinc-800 dark:text-zinc-100">$0</div>
                <div class="text-zinc-500 text-sm mb-2">Basic access, limited unlocks</div>
                <button class="bg-zinc-200 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-200 px-4 py-2 rounded-lg font-semibold shadow cursor-not-allowed opacity-60">Current Plan</button>
              </div>
              <!-- Pro Card -->
              <div class="bg-white dark:bg-zinc-900 rounded-xl shadow p-6 flex flex-col items-center gap-4 border border-indigo-500">
                <div class="text-lg font-bold tracking-tight">Global Pro</div>
                <div id="pro-price" class="text-3xl font-bold text-indigo-600">$49</div>
                <div class="text-zinc-500 text-sm mb-2">Unlimited unlocks, premium support</div>
                <button id="pro-stripe-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold shadow hover:bg-indigo-700 transition flex items-center gap-2">
                  <span class="lucide" data-icon="credit-card"></span>
                  Upgrade to Pro
                </button>
              </div>
            </div>
          </div>
          <!-- History Table -->
          <div>
            <div class="font-semibold text-zinc-800 dark:text-zinc-200 tracking-tight mb-2">History</div>
            <table class="w-full text-sm">
              <thead>
                <tr class="text-zinc-500">
                  <th class="py-1 pr-4 text-left">Date</th>
                  <th class="py-1 pr-4 text-left">Type</th>
                  <th class="py-1 pr-4 text-left">Amount</th>
                  <th class="py-1 pr-4 text-left">Download</th>
                </tr>
              </thead>
              <tbody id="billing-history"></tbody>
            </table>
          </div>
        </div>
      </div>
        <h1 class="text-2xl font-bold mb-6 text-center text-gray-800">Configuración</h1>
        <form class="mb-6 max-w-md mx-auto bg-white p-6 rounded shadow">
          <div class="mb-4">
            <label for="email" class="block mb-1 font-medium text-gray-700">Email de notificaciones</label>
            <input type="email" class="w-full rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400" id="email" placeholder="usuario@ejemplo.com" />
          </div>
          <div class="mb-4">
            <label for="theme" class="block mb-1 font-medium text-gray-700">Tema</label>
            <select class="w-full rounded border border-gray-300 px-3 py-2" id="theme">
              <option>Claro</option>
              <option>Oscuro</option>
            </select>
          </div>
          <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition w-full" type="submit">Guardar</button>
        </form>
        <div class="bg-blue-100 text-blue-800 px-4 py-3 rounded text-center mt-4">Esta pantalla es solo un ejemplo de configuración.</div>
      </div>
    </div>
  </div>
  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <!-- Supabase JS CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Tabs JS minimalista + Onboarding Logic + Dossier Logic + Billing Logic -->
  <script>
              // --- Route Protection & Auth Middleware Mejorado ---
              const protectedRoutes = ['#dashboard', '#radar', '#settings-api', '#exclusive-dashboard'];
              async function checkAuthAndRoute() {
                const hash = location.hash || '#dashboard';
                if (hash === '#login') {
                  showLogin();
                  return;
                }
                const session = await supabase.auth.getSession();
                const user = session?.data?.session?.user;
                if (!user && protectedRoutes.includes(hash)) {
                  location.hash = '#login';
                  showLogin();
                  return;
                }
                // Acceso exclusivo: solo requiere estar autenticado
                if (user && hash === '#exclusive-dashboard') {
                  hideLogin();
                  showSection('#exclusive-dashboard');
                  // Aquí se puede llamar a la función que renderiza los servicios del usuario
                  return;
                }
                // Lógica original para dashboard y settings-api (requiere plan Pro)
                if (user && (hash === '#dashboard' || hash === '#settings-api')) {
                  const { data: profile, error } = await supabase.from('profiles').select('plan_type').eq('id', user.id).single();
                  if (error) {
                    showLogin('Error al obtener perfil.');
                    return;
                  }
                  if (!profile || profile.plan_type === 'free') {
                    location.hash = '#pricing';
                    setTimeout(() => alert('Pro access required'), 100);
                    return;
                  }
                }
                hideLogin();
                showSection(hash);
                initSectionData();
              }
              window.addEventListener('hashchange', checkAuthAndRoute);


              // Mostrar solo la sección activa (SPA)
              function showSection(hash) {
                const sections = ['#dashboard', '#radar', '#settings-api', '#exclusive-dashboard'];
                sections.forEach(id => {
                  const el = document.querySelector(id);
                  if (el) el.classList.add('hidden');
                });
                const active = document.querySelector(hash);
                if (active) active.classList.remove('hidden');
                // Si es el dashboard exclusivo, renderizar servicios
                if (hash === '#exclusive-dashboard') renderUserServices();
              }

              // Mock de servicios disponibles
              const ALL_SERVICES = [
                {
                  id: 'dashboard-pro',
                  name: 'Dashboard Pro',
                  desc: 'Acceso total a la base de datos, filtros avanzados y exportación CSV.',
                  link: '#dashboard',
                  price: 29,
                },
                {
                  id: 'custom-api',
                  name: 'Custom Alert API',
                  desc: 'Webhooks directos a Slack o CRM. Automatización avanzada.',
                  link: '#settings-api',
                  price: 199,
                }
              ];

              // Mock: servicios contratados por el usuario (en real, traer del backend)
              // Obtiene y actualiza servicios contratados desde Supabase
              async function getUserServices() {
                const session = await supabase.auth.getSession();
                const user = session?.data?.session?.user;
                if (!user) return [];
                // Suponiendo que la columna 'services' en 'profiles' es un array de ids de servicios contratados
                const { data: profile, error } = await supabase.from('profiles').select('services').eq('id', user.id).single();
                if (error || !profile) return [];
                return profile.services || [];
              }

              async function updateUserServices(newServices) {
                const session = await supabase.auth.getSession();
                const user = session?.data?.session?.user;
                if (!user) return;
                await supabase.from('profiles').update({ services: newServices }).eq('id', user.id);
              }

              async function renderUserServices() {
                const list = document.getElementById('user-services-list');
                if (!list) return;
                const userServices = await getUserServices();
                list.innerHTML = '';
                ALL_SERVICES.forEach(svc => {
                  const isActive = userServices.includes(svc.id);
                  let html = '';
                  if (isActive) {
                    html = `
                      <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-6 flex flex-col md:flex-row md:items-center gap-4">
                        <div class="flex-1">
                          <h3 class="text-lg font-semibold text-zinc-200">${svc.name} <span class="ml-2 px-2 py-0.5 rounded bg-green-700 text-xs text-white">Contratado</span></h3>
                          <p class="text-zinc-400 text-sm mt-1">${svc.desc}</p>
                          <div class="mt-2 text-zinc-300 text-sm">Tu enlace de acceso: <a href="${svc.link}" class="text-indigo-400 underline">Ir al servicio</a></div>
                        </div>
                        <button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition text-sm unsubscribe-btn" data-svc="${svc.id}">Desuscribirse</button>
                      </div>
                    `;
                  } else {
                    html = `
                      <div class="bg-zinc-900/40 border border-zinc-800 rounded-2xl p-6 flex flex-col md:flex-row md:items-center gap-4 opacity-70">
                        <div class="flex-1">
                          <h3 class="text-lg font-semibold text-zinc-200">${svc.name} <span class="ml-2 px-2 py-0.5 rounded bg-zinc-700 text-xs text-white">No contratado</span></h3>
                          <p class="text-zinc-400 text-sm mt-1">${svc.desc}</p>
                        </div>
                        <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition text-sm upgrade-btn" data-svc="${svc.id}">Upgrade ($${svc.price}/mes)</button>
                      </div>
                    `;
                  }
                  list.innerHTML += html;
                });
                // Bind upgrade/desuscribir
                setTimeout(() => {
                  document.querySelectorAll('.upgrade-btn').forEach(btn => {
                    btn.addEventListener('click', async function () {
                      const svc = btn.getAttribute('data-svc');
                      const current = await getUserServices();
                      if (!current.includes(svc)) {
                        const updated = [...current, svc];
                        await updateUserServices(updated);
                        renderUserServices();
                        alert('¡Upgrade exitoso! Ahora tienes acceso a ' + svc);
                      }
                    });
                  });
                  document.querySelectorAll('.unsubscribe-btn').forEach(btn => {
                    btn.addEventListener('click', async function () {
                      const svc = btn.getAttribute('data-svc');
                      const current = await getUserServices();
                      const updated = current.filter(s => s !== svc);
                      await updateUserServices(updated);
                      renderUserServices();
                      alert('Te has desuscrito de ' + svc);
                    });
                  });
                }, 100);
              }

              function renderUserServices() {
                const list = document.getElementById('user-services-list');
                if (!list) return;
                list.innerHTML = '';
                ALL_SERVICES.forEach(svc => {
                  const isActive = userServices.includes(svc.id);
                  let html = '';
                  if (isActive) {
                    html = `
                      <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-6 flex flex-col md:flex-row md:items-center gap-4">
                        <div class="flex-1">
                          <h3 class="text-lg font-semibold text-zinc-200">${svc.name} <span class="ml-2 px-2 py-0.5 rounded bg-green-700 text-xs text-white">Contratado</span></h3>
                          <p class="text-zinc-400 text-sm mt-1">${svc.desc}</p>
                          <div class="mt-2 text-zinc-300 text-sm">Tu enlace de acceso: <a href="${svc.link}" class="text-indigo-400 underline">Ir al servicio</a></div>
                        </div>
                        <button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition text-sm unsubscribe-btn" data-svc="${svc.id}">Desuscribirse</button>
                      </div>
                    `;
                  } else {
                    html = `
                      <div class="bg-zinc-900/40 border border-zinc-800 rounded-2xl p-6 flex flex-col md:flex-row md:items-center gap-4 opacity-70">
                        <div class="flex-1">
                          <h3 class="text-lg font-semibold text-zinc-200">${svc.name} <span class="ml-2 px-2 py-0.5 rounded bg-zinc-700 text-xs text-white">No contratado</span></h3>
                          <p class="text-zinc-400 text-sm mt-1">${svc.desc}</p>
                        </div>
                        <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition text-sm upgrade-btn" data-svc="${svc.id}">Upgrade ($${svc.price}/mes)</button>
                      </div>
                    `;
                  }
                  list.innerHTML += html;
                });
                // Bind upgrade/desuscribir
                setTimeout(() => {
                  document.querySelectorAll('.upgrade-btn').forEach(btn => {
                    btn.addEventListener('click', function () {
                      const svc = btn.getAttribute('data-svc');
                      if (!userServices.includes(svc)) userServices.push(svc);
                      renderUserServices();
                      alert('¡Upgrade exitoso! Ahora tienes acceso a ' + svc);
                    });
                  });
                  document.querySelectorAll('.unsubscribe-btn').forEach(btn => {
                    btn.addEventListener('click', function () {
                      const svc = btn.getAttribute('data-svc');
                      userServices = userServices.filter(s => s !== svc);
                      renderUserServices();
                      alert('Te has desuscrito de ' + svc);
                    });
                  });
                }, 100);
              }

              // Logout básico
              document.addEventListener('DOMContentLoaded', function () {
                const logoutBtn = document.getElementById('logout-btn');
                if (logoutBtn) {
                  logoutBtn.addEventListener('click', async function () {
                    await supabase.auth.signOut();
                    location.hash = '#login';
                    showLogin();
                  });
                }
              });
              // --- Login UI Minimalista Mejorado ---
              function showLogin(msg) {
                document.getElementById('login-page').classList.remove('hidden');
                document.getElementById('main-body').classList.add('bg-zinc-950');
                const err = document.getElementById('login-error');
                if (msg) {
                  err.textContent = msg;
                  err.classList.remove('hidden');
                } else {
                  err.classList.add('hidden');
                }
              }
              function hideLogin() {
                document.getElementById('login-page').classList.add('hidden');
                document.getElementById('main-body').classList.remove('bg-zinc-950');
              }
              // --- Login Form Logic ---
              document.getElementById('login-form').onsubmit = async function(e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value.trim();
                const password = document.getElementById('login-password').value;
                const err = document.getElementById('login-error');
                err.classList.add('hidden');
                const { error } = await supabase.auth.signInWithPassword({ email, password });
                if (error) {
                  err.textContent = error.message;
                  err.classList.remove('hidden');
                } else {
                  hideLogin();
                  location.hash = '#dashboard';
                }
              };
              document.getElementById('google-login').onclick = async function() {
                await supabase.auth.signInWithOAuth({ provider: 'google' });
              };
              // --- Inicialización segura ---
              checkAuthAndRoute();
          // --- Resaltar pestaña activa ---
          function highlightActiveTab() {
            document.querySelectorAll('.tab-link').forEach(link => {
              link.classList.remove('text-indigo-500', 'border-indigo-500');
              if (link.getAttribute('href') === location.hash) {
                link.classList.add('text-indigo-500', 'border-indigo-500');
              }
            });
          }
          window.addEventListener('hashchange', highlightActiveTab);
          highlightActiveTab();
    // --- ONBOARDING LOGIC ---
    function showOnboarding() {
      document.getElementById('onboarding-view').classList.remove('hidden');
      // Render icons
      lucide.createIcons();
    }
    function hideOnboarding() {
      document.getElementById('onboarding-view').classList.add('hidden');
    }
    // Persona card selection logic
    document.querySelectorAll('.onboarding-card').forEach(card => {
      card.addEventListener('click', async function() {
        document.querySelectorAll('.onboarding-card').forEach(c => c.classList.remove('ring-2', 'ring-indigo-500', 'bg-indigo-50'));
        this.classList.add('ring-2', 'ring-indigo-500', 'bg-indigo-50');
        // Save selection and update Supabase
        const persona = this.getAttribute('data-persona');
        await updateUserPersona(persona);
        // Optionally, move to next step or hide onboarding
        setTimeout(() => {
          hideOnboarding();
          // Show dashboard or redirect as needed
          document.querySelector('.tab-link[data-tab="dashboard"]').click();
        }, 600);
      });
    });
    // If persona already selected, highlight it
    const selectedPersona = localStorage.getItem('persona-selected');
    if (selectedPersona) {
      const selectedCard = document.querySelector(`.onboarding-card[data-persona="${selectedPersona}"]`);
      if (selectedCard) {
        selectedCard.classList.add('ring-2', 'ring-indigo-500', 'bg-indigo-50');
      }
    }
    // --- Supabase Integration ---
    // TODO: Replace with your real Supabase project URL and anon key
    const SUPABASE_URL = 'https://YOUR_PROJECT.supabase.co';
    const SUPABASE_KEY = 'YOUR_ANON_KEY';
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // You must have the user authenticated and have their user id
    // For demo, we use a placeholder userId. Replace with real auth logic.
    const userId = localStorage.getItem('supabase-user-id') || 'demo-user-id';

    async function updateUserPersona(persona) {
      localStorage.setItem('persona-selected', persona);
      // Update Supabase profiles table
      try {
        const { error } = await supabase
          .from('profiles')
          .update({ user_type: persona })
          .eq('id', userId);
        if (error) {
          console.error('Supabase update error:', error.message);
        }
      } catch (e) {
        console.error('Supabase update exception:', e);
      }
    }
    // Show onboarding if not completed
    if (!localStorage.getItem('persona-selected')) {
      showOnboarding();
    }
        // Persona-Based Dashboard Logic
        const personaModal = document.getElementById('persona-modal');
        const personaBtns = document.querySelectorAll('.persona-btn');
        const personaTableHeader = document.getElementById('persona-table-header');
        const personaTableBody = document.getElementById('persona-table-body');
        const paywallCta = document.getElementById('paywall-cta');
        const personaOptions = {
          dev: {
            columns: ['Empresa', 'Tech Stack', 'Funding', 'Churn'],
            order: ['Empresa', 'Tech Stack', 'Funding', 'Churn'],
            cta: 'Desbloquea 50+ leads de outsourcing con alta intención',
          },
          recruit: {
            columns: ['Empresa', 'Churn', 'Funding', 'Tech Stack'],
            order: ['Empresa', 'Churn', 'Funding', 'Tech Stack'],
            cta: 'Desbloquea 50+ mandatos urgentes de reclutamiento',
          },
          tools: {
            columns: ['Empresa', 'Funding', 'Tech Stack', 'Churn'],
            order: ['Empresa', 'Funding', 'Tech Stack', 'Churn'],
            cta: 'Desbloquea 50+ leads para vender herramientas tecnológicas',
          },
        };
        const personaData = [
          { Empresa: 'Acme Corp', 'Tech Stack': 'React, Node', Funding: '$2M', Churn: 'Bajo' },
          { Empresa: 'BetaSoft', 'Tech Stack': 'Vue, Python', Funding: '$5M', Churn: 'Alto' },
          { Empresa: 'Cloudify', 'Tech Stack': 'Go, AWS', Funding: '$1M', Churn: 'Medio' },
        ];
        function renderPersonaTable(persona) {
          const config = personaOptions[persona];
          personaTableHeader.innerHTML = '';
          config.order.forEach(col => {
            personaTableHeader.innerHTML += `<th class='px-4 py-2'>${col}</th>`;
          });
          personaTableBody.innerHTML = '';
          personaData.forEach(row => {
            personaTableBody.innerHTML += `<tr>${config.order.map(col => `<td class='px-4 py-2'>${row[col]}</td>`).join('')}</tr>`;
          });
          paywallCta.textContent = config.cta;
        }
        function showPersonaModal() {
          personaModal.classList.remove('hidden');
        }
        function hidePersonaModal() {
          personaModal.classList.add('hidden');
        }
        function getPersona() {
          return localStorage.getItem('persona-selected');
        }
        function setPersona(p) {
          localStorage.setItem('persona-selected', p);
        }
        personaBtns.forEach(btn => {
          btn.addEventListener('click', function() {
            setPersona(this.getAttribute('data-persona'));
            hidePersonaModal();
            renderPersonaTable(getPersona());
          });
        });
        // Mostrar modal si no hay persona seleccionada
        if (!getPersona()) {
          showPersonaModal();
        } else {
          renderPersonaTable(getPersona());
        }
    // Superuser session logic
    function isSuperuser() {
      return localStorage.getItem('superuser-auth') === '1';
    }
    function showSuperuserTab() {
      document.getElementById('admin-tab-link').classList.remove('hidden');
    }
    function hideSuperuserTab() {
      document.getElementById('admin-tab-link').classList.add('hidden');
    }
    // Show admin tab if already logged in
    if (isSuperuser()) showSuperuserTab();

    // Tabs minimalista con Tailwind
    document.querySelectorAll('.tab-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        // If admin tab, check superuser
        if (this.getAttribute('data-tab') === 'admin-intel' && !isSuperuser()) {
          document.getElementById('superuser-login-modal').classList.remove('hidden');
          document.getElementById('superuser-password').focus();
          return;
        }
        document.querySelectorAll('.tab-link').forEach(l => l.classList.remove('border-blue-500', 'text-blue-600', 'font-bold'));
        this.classList.add('border-blue-500', 'text-blue-600', 'font-bold');
        document.querySelectorAll('.tab-content-section').forEach(sec => sec.classList.add('hidden'));
        document.getElementById(this.getAttribute('data-tab')).classList.remove('hidden');
        // Hide dossier view if navigating away
        document.getElementById('lead-dossier-view').classList.add('hidden');
      });
    });
    // Activar primer tab por defecto
    document.querySelector('.tab-link').click();

    // Superuser login modal logic (now uses changeable password)
    document.getElementById('superuser-login-btn').onclick = function() {
      const pass = document.getElementById('superuser-password').value;
      const realPass = localStorage.getItem('superuser-password') || 'supersecret';
      if (pass === realPass) {
        localStorage.setItem('superuser-auth', '1');
        document.getElementById('superuser-login-modal').classList.add('hidden');
        document.getElementById('superuser-login-error').classList.add('hidden');
        showSuperuserTab();
        // Switch to admin tab
        document.querySelector('.tab-link[data-tab="admin-intel"]').click();
      } else {
        document.getElementById('superuser-login-error').classList.remove('hidden');
      }
    };
    document.getElementById('superuser-password').addEventListener('keydown', function(e) {
      if (e.key === 'Enter') document.getElementById('superuser-login-btn').click();
    });

    // --- Superuser Admin Dashboard Logic ---
    // --- Superuser Admin Dashboard: Real Data ---
    async function loadAdminIntel() {
      // 1. Real-time Sales Feed
      const { data: sales, error: salesError } = await supabase
        .from('sales')
        .select('created_at, user_type, service, amount')
        .order('created_at', { ascending: false })
        .limit(20);
      const salesFeedDiv = document.getElementById('sales-feed');
      salesFeedDiv.innerHTML = '';
      (sales || []).forEach(item => {
        const time = new Date(item.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        salesFeedDiv.innerHTML += `<div class='flex items-center gap-4'><div class='w-2 h-2 rounded-full bg-indigo-500'></div><div class='text-xs text-zinc-500 w-14'>${time}</div><div class='text-sm font-semibold text-zinc-700 dark:text-zinc-200 w-20'>${item.user_type}</div><div class='text-sm text-zinc-600 w-32'>${item.service}</div><div class='text-sm font-bold text-indigo-600'>${item.amount}</div></div>`;
      });

      // 2. Attribution Metrics
      // Sales by Origin
      const { data: originRows } = await supabase
        .from('sales')
        .select('origin, amount');
      const originMap = {};
      (originRows || []).forEach(row => {
        if (!originMap[row.origin]) originMap[row.origin] = 0;
        originMap[row.origin] += Number(row.amount || 0);
      });
      const salesOriginData = Object.entries(originMap).map(([origin, value]) => ({ origin, value }));

      // Sales by Hour
      const hourMap = {};
      (sales || []).forEach(row => {
        const hour = new Date(row.created_at).getHours().toString().padStart(2, '0');
        if (!hourMap[hour]) hourMap[hour] = 0;
        hourMap[hour] += 1;
      });
      const salesHourData = Object.entries(hourMap).map(([hour, value]) => ({ hour, value }));

      // Load Tremor.so CDN and render charts
      const tremorScript = document.createElement('script');
      tremorScript.src = 'https://cdn.jsdelivr.net/npm/@tremor/chart@latest/dist/chart.umd.min.js';
      tremorScript.onload = () => {
        new window.tremor.BarChart(document.getElementById('sales-origin-chart'), {
          data: salesOriginData,
          index: 'origin',
          categories: ['value'],
          colors: ['indigo'],
          showLegend: false,
          layout: 'vertical',
        });
        new window.tremor.LineChart(document.getElementById('sales-hour-chart'), {
          data: salesHourData,
          index: 'hour',
          categories: ['value'],
          colors: ['indigo'],
          showLegend: false,
        });
      };
      document.body.appendChild(tremorScript);

      // 3. Conversion Rate
      const { data: users } = await supabase.from('profiles').select('id, user_type');
      const free = (users || []).filter(u => u.user_type === 'free').length;
      const premium = (users || []).filter(u => u.user_type === 'premium').length;
      const rate = (premium + free) > 0 ? ((premium / (premium + free)) * 100).toFixed(1) : '--';
      document.getElementById('conversion-rate').textContent = rate + '%';

      // 4. Regional Performance
      const { data: unlocks } = await supabase.from('unlocks').select('country');
      const countryMap = {};
      (unlocks || []).forEach(row => {
        if (!countryMap[row.country]) countryMap[row.country] = 0;
        countryMap[row.country] += 1;
      });
      const topCountries = Object.entries(countryMap).sort((a, b) => b[1] - a[1]).slice(0, 3);
      const regionalList = document.getElementById('regional-performance');
      regionalList.innerHTML = '';
      topCountries.forEach(([country], i) => {
        regionalList.innerHTML += `<li>${country}</li>`;
      });
    }

    // Auto-load admin dashboard if tab is active
    document.querySelector('.tab-link[data-tab="admin-intel"]').addEventListener('click', loadAdminIntel);

    // --- Billing Logic ---
    // Stripe Payment Link Integration (with Supabase UID)
    const STRIPE_LINK_MONTHLY = 'https://buy.stripe.com/your_real_29usd_link'; // <-- Replace with your real $29/mo link
    let isYearly = false;
    const billingToggle = document.getElementById('billing-toggle');
    const billingToggleKnob = document.getElementById('billing-toggle-knob');
    const proPrice = document.getElementById('pro-price');
    billingToggle.onclick = function() {
      isYearly = !isYearly;
      if (isYearly) {
        billingToggleKnob.style.left = '32px';
        proPrice.textContent = '$290';
      } else {
        billingToggleKnob.style.left = '4px';
        proPrice.textContent = '$29';
      }
    };
    document.getElementById('pro-stripe-btn').onclick = async function() {
      // Get Supabase UID
      let user = null;
      try {
        const { data, error } = await supabase.auth.getUser();
        if (data && data.user) user = data.user;
      } catch {}
      let url = STRIPE_LINK_MONTHLY;
      if (user && user.id) {
        url += (url.includes('?') ? '&' : '?') + 'client_reference_id=' + encodeURIComponent(user.id);
      }
      window.open(url, '_blank');
    };
        // Payment success confetti and message
        if (window.location.search.includes('payment=success')) {
          // Advanced Confetti (canvas)
          const canvas = document.createElement('canvas');
          canvas.style.position = 'fixed';
          canvas.style.top = 0;
          canvas.style.left = 0;
          canvas.style.width = '100vw';
          canvas.style.height = '100vh';
          canvas.style.pointerEvents = 'none';
          canvas.style.zIndex = 10000;
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
          document.body.appendChild(canvas);
          const ctx = canvas.getContext('2d');
          const confettiColors = ['#6366f1','#f59e42','#10b981','#f43f5e','#fbbf24','#3b82f6'];
          const confetti = Array.from({length: 120}, () => ({
            x: Math.random() * canvas.width,
            y: Math.random() * -canvas.height,
            r: 6 + Math.random() * 6,
            d: 8 + Math.random() * 8,
            color: confettiColors[Math.floor(Math.random()*confettiColors.length)],
            tilt: Math.random() * 10 - 10,
            tiltAngle: 0,
            tiltAngleIncremental: (Math.random() * 0.07) + .05
          }));
          let angle = 0;
          function drawConfetti() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            angle += 0.01;
            confetti.forEach(c => {
              c.y += (Math.cos(angle + c.d) + 3 + c.r/2) / 2;
              c.x += Math.sin(angle);
              c.tiltAngle += c.tiltAngleIncremental;
              c.tilt = Math.sin(c.tiltAngle) * 15;
              ctx.beginPath();
              ctx.lineWidth = c.r;
              ctx.strokeStyle = c.color;
              ctx.moveTo(c.x + c.tilt + c.r/3, c.y);
              ctx.lineTo(c.x, c.y + c.tilt + c.r/3);
              ctx.stroke();
            });
          }
          let frame = 0;
          function animateConfetti() {
            drawConfetti();
            frame++;
            if (frame < 120) requestAnimationFrame(animateConfetti);
            else setTimeout(() => canvas.remove(), 800);
          }
          animateConfetti();
          // Success message
          const msg = document.createElement('div');
          msg.textContent = '¡Pago exitoso! Tu cuenta ahora es Pro.';
          msg.className = 'fixed top-6 left-1/2 -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded shadow-lg z-50 animate-bounce';
          document.body.appendChild(msg);
          setTimeout(() => { msg.remove(); }, 3000);
          // Optionally, update user state in frontend
          (async () => {
            try {
              const { data, error } = await supabase.auth.getUser();
              if (data && data.user) {
                // Optionally, refetch user profile or reload page/section
                // location.reload(); // Uncomment if you want to force reload
              }
            } catch {}
          })();
        }
    // History table (replace with real data fetch)
    const billingHistory = [
      { date: '2025-12-01', type: 'Unlock', amount: '$49', url: '#' },
      { date: '2025-11-01', type: 'Invoice', amount: '$49', url: '#' },
    ];
    const billingHistoryTbody = document.getElementById('billing-history');
    billingHistoryTbody.innerHTML = '';
    billingHistory.forEach(row => {
      billingHistoryTbody.innerHTML += `<tr><td class='py-1 pr-4'>${row.date}</td><td class='py-1 pr-4'>${row.type}</td><td class='py-1 pr-4'>${row.amount}</td><td class='py-1 pr-4'><a href='${row.url}' class='text-indigo-600 hover:underline'><span class='lucide' data-icon='download'></span></a></td></tr>`;
    });
    lucide.createIcons();

    // --- Lead Dossier Logic (Supabase) ---
    async function fetchLeadById(leadId) {
      // Fetch lead from Supabase 'leads' table by id
      const { data, error } = await supabase
        .from('leads')
        .select('*')
        .eq('id', leadId)
        .single();
      if (error) {
        console.error('Error fetching lead:', error.message);
        return null;
      }
      return data;
    }

    async function showLeadDossierById(leadId) {
      const lead = await fetchLeadById(leadId);
      if (!lead) return;
      // Fill header
      document.getElementById('dossier-company').textContent = lead.company || '';
      document.getElementById('dossier-hq').textContent = lead.hq || '';
      // SVG progress
      const score = Math.max(0, Math.min(lead.hiring_score || 0, 100));
      const circle = document.getElementById('dossier-hiring-bar');
      const dash = 2 * Math.PI * 42;
      circle.setAttribute('stroke-dasharray', dash);
      circle.setAttribute('stroke-dashoffset', dash * (1 - score / 100));
      document.getElementById('dossier-hiring-score').textContent = score;
      // Tech stack tags (assume comma-separated string or array)
      const techDiv = document.getElementById('dossier-techstack');
      techDiv.innerHTML = '';
      let techStack = lead.tech_stack;
      if (typeof techStack === 'string') techStack = techStack.split(',').map(s => s.trim());
      (techStack || []).forEach(tag => {
        const el = document.createElement('span');
        el.className = 'bg-zinc-800 text-zinc-300 px-2 py-1 rounded-md text-sm mr-1 mb-1';
        el.textContent = tag;
        techDiv.appendChild(el);
      });
      // Growth signals
      document.getElementById('dossier-growth').textContent = lead.growth_signals || '';
      // Financials (assume JSON array in lead.financials)
      const finTbody = document.getElementById('dossier-financials');
      finTbody.innerHTML = '';
      let financials = lead.financials;
      if (typeof financials === 'string') {
        try { financials = JSON.parse(financials); } catch { financials = []; }
      }
      (financials || []).forEach(row => {
        finTbody.innerHTML += `<tr><td class='py-1 pr-4'>${row.date}</td><td class='py-1 pr-4'>${row.round}</td><td class='py-1 pr-4'>${row.amount}</td></tr>`;
      });
      // Contact info
      const contactDiv = document.getElementById('dossier-contact-content');
      contactDiv.innerHTML = '';
      if (lead.is_premium) {
        contactDiv.innerHTML = `<div class='text-zinc-800 dark:text-zinc-200 text-lg font-mono mb-2'>${lead.contact_email || ''}</div><div class='text-zinc-500 text-sm'>${lead.contact_phone || ''}</div>`;
        document.getElementById('dossier-contact-blur').style.display = 'none';
      } else {
        contactDiv.innerHTML = `<div class='h-8 w-40 bg-zinc-200 dark:bg-zinc-800 rounded mb-2'></div><div class='h-4 w-24 bg-zinc-100 dark:bg-zinc-700 rounded'></div>`;
        document.getElementById('dossier-contact-blur').style.display = '';
      }
      // Show view
      document.getElementById('lead-dossier-view').classList.remove('hidden');
    }

    // Unlock button logic (simulate upgrade)
    document.getElementById('dossier-unlock-btn').onclick = async function() {
      // For real app: update is_premium in Supabase, then reload
      const hash = window.location.hash;
      const id = hash.match(/lead\/(\d+)/) ? hash.match(/lead\/(\d+)/)[1] : null;
      if (!id) return;
      const { error } = await supabase.from('leads').update({ is_premium: true }).eq('id', id);
      if (!error) showLeadDossierById(id);
    };

    // Show dossier when hash is #lead/[id]
    if (window.location.hash.startsWith('#lead/')) {
      const id = window.location.hash.match(/lead\/(\d+)/) ? window.location.hash.match(/lead\/(\d+)/)[1] : null;
      if (id) showLeadDossierById(id);
    }
  </script>
  <script>
    // --- TAREAS ---
    const taskForm = document.getElementById('task-form');
    const taskInput = document.getElementById('task-input');
    const taskTbody = document.getElementById('task-tbody');
    let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');

    function renderTasks() {
      taskTbody.innerHTML = '';
      tasks.forEach((task, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td class='px-4 py-2'>${i + 1}</td><td class='px-4 py-2'>${task.title}</td><td class='px-4 py-2'><input type='checkbox' ${task.completed ? 'checked' : ''} onchange='toggleTask(${i})'></td><td class='px-4 py-2'><button class='bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition' onclick='deleteTask(${i})'>Eliminar</button></td>`;
        taskTbody.appendChild(tr);
      });
      document.getElementById('dashboard-tasks-count').textContent = tasks.length;
    }
    function saveTasks() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }
    taskForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const value = taskInput.value.trim();
      if (!value) return;
      tasks.push({ title: value, completed: false });
      saveTasks();
      renderTasks();
      taskInput.value = '';
    });
    window.deleteTask = function(i) {
      tasks.splice(i, 1);
      saveTasks();
      renderTasks();
    }
    window.toggleTask = function(i) {
      tasks[i].completed = !tasks[i].completed;
      saveTasks();
      renderTasks();
    }
    renderTasks();

    // --- USUARIOS ---
    const userForm = document.getElementById('user-form');
    const userName = document.getElementById('user-name');
    const userEmail = document.getElementById('user-email');
    const userTbody = document.getElementById('user-tbody');
    let users = JSON.parse(localStorage.getItem('users') || '[]');

    function renderUsers() {
      userTbody.innerHTML = '';
      users.forEach((user, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td class='px-4 py-2'>${i + 1}</td><td class='px-4 py-2'>${user.name}</td><td class='px-4 py-2'>${user.email}</td><td class='px-4 py-2'><button class='bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition' onclick='deleteUser(${i})'>Eliminar</button></td>`;
        userTbody.appendChild(tr);
      });
      document.getElementById('dashboard-users-count').textContent = users.length;
    }
    function saveUsers() {
      localStorage.setItem('users', JSON.stringify(users));
    }
    userForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const name = userName.value.trim();
      const email = userEmail.value.trim();
      if (!name || !email) return;
      users.push({ name, email });
      saveUsers();
      renderUsers();
      userName.value = '';
      userEmail.value = '';
    });
    window.deleteUser = function(i) {
      users.splice(i, 1);
      saveUsers();
      renderUsers();
    }
    renderUsers();
  </script>
    <script type="module" src="src/controller.js"></script>
</body>
            <script>
              // --- SPA Navigation ---
              const sections = {
                '#radar': document.getElementById('radar-archive'),
                               '#dashboard': document.getElementById('pro-dashboard'),
                '#settings-api': document.getElementById('api-console'),
              };
              function showSection(hash) {
                Object.values(sections).forEach(sec => sec && sec.classList.add('hidden'));
                if (sections[hash]) sections[hash].classList.remove('hidden');
              }
              window.addEventListener('hashchange', () => showSection(location.hash));
              // Mostrar sección inicial
              showSection(location.hash || '#dashboard');

              // --- Supabase Config (rellena con tus claves) ---
              // --- Supabase Config (PEGA TUS CLAVES AQUÍ) ---
              // const SUPABASE_URL = 'https://xxxx.supabase.co';
              // const SUPABASE_KEY = 'eyJhbGciOi...';
              const SUPABASE_URL = 'https://TU_SUPABASE_URL.supabase.co';
              const SUPABASE_KEY = 'TU_SUPABASE_KEY';

              // --- Función utilitaria para fetch a Supabase REST ---
              async function supabaseFetch(path, params = {}) {
                const url = new URL(SUPABASE_URL + path);
                Object.entries(params).forEach(([k, v]) => url.searchParams.append(k, v));
                const res = await fetch(url, {
                  headers: {
                    apikey: SUPABASE_KEY,
                    Authorization: `Bearer ${SUPABASE_KEY}`
                  }
                });
                return res.ok ? res.json() : [];
              }

              // --- Radar Archive: Fetch PDFs ---
              async function fetchRadarArchive() {
                const grid = document.getElementById('radar-grid');
                if (!grid) return;
                grid.innerHTML = '';
                // Simulación de archivos
                const files = [
                  { name: '2025-12-28.pdf', created_at: '2025-12-28', url: '#', isCurrent: true },
                  { name: '2025-12-21.pdf', created_at: '2025-12-21', url: '#', isCurrent: false },
                  { name: '2025-12-14.pdf', created_at: '2025-12-14', url: '#', isCurrent: false },
                ];
                // Obtener usuario y plan
                let isPremium = false;
                const session = await supabase.auth.getSession();
                const user = session?.data?.session?.user;
                if (user) {
                  const { data: profile } = await supabase.from('profiles').select('plan_type').eq('id', user.id).single();
                  isPremium = profile?.plan_type === 'pro';
                }
                // Calcular semana actual (domingo a domingo)
                function isCurrentWeek(dateStr) {
                  const now = new Date();
                  const d = new Date(dateStr);
                  // Buscar el domingo anterior (o hoy si es domingo)
                  const day = now.getDay();
                  const sunday = new Date(now);
                  sunday.setDate(now.getDate() - day);
                  const nextSunday = new Date(sunday);
                  nextSunday.setDate(sunday.getDate() + 7);
                  return d >= sunday && d < nextSunday;
                }
                for (const file of files) {
                  const card = document.createElement('div');
                  card.className = 'bg-zinc-900 border border-zinc-800 rounded-xl p-6 flex flex-col gap-4 items-start shadow';
                  card.innerHTML = `
                    <div class="flex items-center gap-3 mb-2">
                      <i data-lucide="file-text" class="w-7 h-7 text-indigo-500"></i>
                      <span class="text-zinc-200 font-medium text-lg">${file.name.replace('.pdf','')}</span>
                    </div>
                    <div class="text-zinc-400 text-sm mb-4">${file.created_at}</div>
                  `;
                  // Lógica de acceso
                  if (isCurrentWeek(file.created_at)) {
                    const btn = document.createElement('a');
                    btn.href = file.url;
                    btn.className = 'bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-semibold transition';
                    btn.textContent = 'Download';
                    card.appendChild(btn);
                  } else if (isPremium) {
                    const btn = document.createElement('a');
                    btn.href = file.url;
                    btn.className = 'bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-semibold transition';
                    btn.textContent = 'Download';
                    card.appendChild(btn);
                  } else {
                    const btn = document.createElement('button');
                    btn.className = 'flex items-center gap-2 bg-zinc-800 text-zinc-400 px-4 py-2 rounded-lg font-semibold transition';
                    btn.innerHTML = '<i data-lucide="lock" class="w-5 h-5"></i> Pro Only';
                    btn.onclick = function() { document.getElementById('upgrade-modal').classList.remove('hidden'); };
                    card.appendChild(btn);
                  }
                  grid.appendChild(card);
                }
                if (window.lucide) lucide.createIcons();
              }
              // --- Pro Dashboard: Fetch Leads ---
              async function fetchProDashboard() {
                const tbody = document.getElementById('pro-tbody');
                if (!tbody) return;
                tbody.innerHTML = '';
                // Obtener usuario y plan
                let isPremium = false;
                const session = await supabase.auth.getSession();
                const user = session?.data?.session?.user;
                if (user) {
                  const { data: profile } = await supabase.from('profiles').select('plan_type').eq('id', user.id).single();
                  isPremium = profile?.plan_type === 'pro';
                }
                // Fetch leads desde Supabase (simulado aquí)
                // const { data: leads } = await supabase.from('leads').select('*').order('score', { ascending: false }).limit(20);
                const leads = [
                  { company: 'Acme Corp', contact: 'john@acme.com', score: 97, region: 'US', is_premium: false },
                  { company: 'Globex', contact: 'ceo@globex.com', score: 95, region: 'Canada', is_premium: true },
                  { company: 'Initech', contact: 'sales@initech.com', score: 92, region: 'Mexico', is_premium: false },
                  { company: 'Umbrella', contact: 'biz@umbrella.com', score: 90, region: 'Chile', is_premium: true },
                ];
                for (const lead of leads) {
                  const tr = document.createElement('tr');
                  tr.className = 'border-b border-zinc-800 hover:bg-zinc-900/50 transition';
                  tr.innerHTML = `
                    <td class="px-3 py-2 ${lead.is_premium ? 'text-zinc-100' : ''}">${lead.company}</td>
                    <td class="px-3 py-2">${lead.is_premium || isPremium ? lead.contact : '<span class=\'blur-sm select-none\'>' + lead.contact + '</span>'}</td>
                    <td class="px-3 py-2">${lead.score}</td>
                    <td class="px-3 py-2">${lead.region}</td>
                  `;
                  tbody.appendChild(tr);
                }
                // Export CSV button
                const btn = document.getElementById('export-csv-btn');
                if (btn) {
                  if (isPremium) {
                    btn.disabled = false;
                    btn.classList.remove('text-zinc-400', 'bg-zinc-800', 'cursor-not-allowed');
                    btn.classList.add('bg-indigo-600', 'hover:bg-indigo-700', 'text-white');
                    btn.title = '';
                    btn.onclick = () => {
                      // Exportar a CSV (simulado)
                      let csv = 'Company,Contact Info,Score,Region\n';
                      leads.forEach(l => {
                        csv += `${l.company},${l.contact},${l.score},${l.region}\n`;
                      });
                      const blob = new Blob([csv], { type: 'text/csv' });
                      const url = URL.createObjectURL(blob);
                      const a = document.createElement('a');
                      a.href = url;
                      a.download = 'leads.csv';
                      document.body.appendChild(a);
                      a.click();
                      document.body.removeChild(a);
                      URL.revokeObjectURL(url);
                    };
                    document.getElementById('csv-tooltip').classList.add('hidden');
                  } else {
                    btn.disabled = true;
                    btn.classList.add('text-zinc-400', 'bg-zinc-800', 'cursor-not-allowed');
                    btn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700', 'text-white');
                    btn.title = 'Upgrade to Pro';
                    btn.onclick = null;
                  }
                }
              }
              // --- API Console: Fetch API Key & Webhooks ---
              async function fetchApiConsole() {
                // --- INTEGRACIÓN REAL: Llama a tu backend protegido (Edge Function) ---
                try {
                  const session = await supabase.auth.getSession();
                  const token = session?.data?.session?.access_token;
                  if (!token) throw new Error('No hay sesión activa. Inicia sesión para acceder a la consola API.');
                  // Cambia la URL por la de tu Edge Function desplegada
                  const res = await fetch('https://<TU-PROYECTO>.functions.supabase.co/supabase_middleware', {
                    headers: { 'Authorization': `Bearer ${token}` }
                  });
                  const data = await res.json();
                  if (!res.ok) throw new Error(data.error || 'Error al acceder a la API protegida');
                  // Asume que el backend devuelve { apiKey, webhookLogs }
                  document.getElementById('api-key-field').value = data.apiKey || '';
                  const tbody = document.querySelector('#api-console tbody');
                  if (!tbody) return;
                  tbody.innerHTML = '';
                  (data.webhookLogs || []).forEach(log => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                      <td class="px-4 py-2">${log.status === 'success' ? '<i data-lucide=\'check-circle\' class=\'w-5 h-5 text-green-500\'></i>' : '<i data-lucide=\'x-circle\' class=\'w-5 h-5 text-red-500\'></i>'}</td>
                      <td class="px-4 py-2">${log.ts || log.timestamp || ''}</td>
                      <td class="px-4 py-2 text-zinc-100">${log.lead || log.event || ''}</td>
                    `;
                    tbody.appendChild(tr);
                  });
                  if (window.lucide) lucide.createIcons();
                } catch (err) {
                  alert('Error: ' + err.message);
                }
              }
              // --- Inicialización de datos según sección ---
              function initSectionData() {
                if (location.hash === '#radar') fetchRadarArchive();
                if (location.hash === '#dashboard' || !location.hash) fetchProDashboard();
                if (location.hash === '#settings-api') fetchApiConsole();
              }
              window.addEventListener('hashchange', initSectionData);
              initSectionData();
            </script>
        <!-- Radar Archive Section (/radar) -->
        <section id="radar-archive" class="max-w-3xl mx-auto mt-24 px-4">
          <h2 class="text-2xl font-bold text-zinc-100 mb-8">Radar Archive</h2>
          <div id="radar-grid" class="grid grid-cols-1 sm:grid-cols-2 gap-6"></div>
                </section>
                <!-- Upgrade Modal -->
                <div id="upgrade-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
                  <div class="bg-zinc-900 rounded-xl shadow-lg p-8 max-w-sm w-full flex flex-col items-center gap-6">
                    <h3 class="text-xl font-bold text-zinc-100">Upgrade to Pro</h3>
                    <p class="text-zinc-400 text-center">Unlock all Radar Archive reports and premium features for just <span class="text-indigo-400 font-semibold">$29/mo</span>.</p>
                    <a href="#pricing" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold px-6 py-2 rounded-lg transition">See Plans</a>
                    <button onclick="document.getElementById('upgrade-modal').classList.add('hidden')" class="text-zinc-400 hover:text-zinc-200 text-sm mt-2">Close</button>
                  </div>
                </div>
        </section>

        <!-- Pro Dashboard Section (TanStack Table style) -->
        <section id="pro-dashboard" class="max-w-6xl mx-auto mt-24 px-4">
          <h2 class="text-2xl font-bold text-zinc-100 mb-8">Pro Dashboard</h2>
          <div class="overflow-x-auto rounded-2xl bg-zinc-900/60 border border-zinc-800 shadow-lg">
            <table id="pro-table" class="min-w-full text-xs text-left">
              <thead class="bg-zinc-950/80">
                <tr>
                  <th class="px-3 py-2 text-zinc-300 font-semibold">Company</th>
                  <th class="px-3 py-2 text-zinc-300 font-semibold">Contact Info</th>
                  <th class="px-3 py-2 text-zinc-300 font-semibold">Score</th>
                  <th class="px-3 py-2 text-zinc-300 font-semibold">Region</th>
                </tr>
              </thead>
              <tbody id="pro-tbody"></tbody>
            </table>
            <div class="flex items-center justify-between p-4">
              <button id="export-csv-btn" class="flex items-center gap-2 bg-zinc-800 text-zinc-400 px-4 py-2 rounded-lg font-semibold relative group" disabled>
                <i data-lucide="download" class="w-5 h-5"></i> Export CSV
                <span id="csv-tooltip" class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 hidden group-hover:block bg-zinc-900 text-xs text-zinc-200 px-2 py-1 rounded shadow">Upgrade to Pro to export leads</span>
              </button>
            </div>
          </div>
        </section>

        <!-- API Console Section (/settings/api) -->
        <section id="api-console" class="max-w-3xl mx-auto mt-24 px-4">
          <h2 class="text-2xl font-bold text-zinc-100 mb-8">API Console</h2>
          <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-8 mb-8 backdrop-blur">
            <label class="block text-zinc-300 font-semibold mb-2">Your API Key</label>
            <div class="flex items-center gap-2">
              <input type="password" value="sk-xxxx-xxxx-xxxx" readonly class="bg-zinc-800 text-zinc-200 px-4 py-2 rounded-lg w-full font-mono" id="api-key-field">
              <button id="copy-api-key" class="bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-lg transition flex items-center gap-1"><i data-lucide="copy" class="w-5 h-5"></i> Copy</button>
              <button id="regen-api-key" class="bg-zinc-700 hover:bg-red-600 text-red-200 hover:text-white px-3 py-2 rounded-lg transition flex items-center gap-1"><i data-lucide="refresh-ccw" class="w-5 h-5"></i> Regenerate</button>
            </div>
            <p class="text-xs text-zinc-400 mt-2">Keep your API key secret. <span class="underline cursor-pointer text-indigo-400" id="show-api-key">Show</span></p>
          </div>
          <div class="bg-zinc-900/60 border border-zinc-800 rounded-2xl p-8 backdrop-blur">
            <h3 class="text-lg font-semibold text-zinc-200 mb-4">Latest Webhook Deliveries</h3>
            <div id="webhook-empty-state" class="text-zinc-400 text-center py-8 hidden">
              <i data-lucide="bell-off" class="w-8 h-8 mx-auto mb-2"></i>
              <p>No webhook deliveries yet.</p>
            </div>
            <table id="webhook-table" class="min-w-full text-sm text-left">
              <thead>
                <tr>
                  <th class="px-4 py-2 text-zinc-300">Status</th>
                  <th class="px-4 py-2 text-zinc-300">Timestamp</th>
                  <th class="px-4 py-2 text-zinc-300">Lead Name</th>
                </tr>
              </thead>
              <tbody>
                <!-- Webhook rows injected here -->
              </tbody>
            </table>
          </div>

          <!-- Modal for API Key Regeneration -->
          <div id="modal-api-regen" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 hidden">
            <div class="bg-zinc-900 border border-zinc-800 rounded-xl p-8 max-w-sm w-full">
              <h4 class="text-lg font-bold text-zinc-100 mb-2">Regenerate API Key?</h4>
              <p class="text-zinc-400 mb-4">This will invalidate your current API key. Apps using the old key will stop working. Continue?</p>
              <div class="flex gap-2 justify-end">
                <button id="cancel-regen" class="px-4 py-2 rounded-lg bg-zinc-700 text-zinc-200 hover:bg-zinc-800">Cancel</button>
                <button id="confirm-regen" class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700">Regenerate</button>
              </div>
            </div>
          </div>
        </section>

        <script>
          // Lucide icons init (if not already present)
          if (window.lucide) lucide.createIcons();
          else {
            const script = document.createElement('script');
            script.src = 'https://unpkg.com/lucide@latest/dist/umd/lucide.min.js';
            script.onload = () => lucide.createIcons();
            document.body.appendChild(script);
          }

          // --- API Console Developer Logic ---
          document.addEventListener('DOMContentLoaded', function () {
            // Elements
            const apiKeyField = document.getElementById('api-key-field');
            const copyBtn = document.getElementById('copy-api-key');
            const regenBtn = document.getElementById('regen-api-key');
            const showBtn = document.getElementById('show-api-key');
            const modal = document.getElementById('modal-api-regen');
            const cancelRegen = document.getElementById('cancel-regen');
            const confirmRegen = document.getElementById('confirm-regen');
            const webhookTable = document.getElementById('webhook-table');
            const webhookTbody = webhookTable ? webhookTable.querySelector('tbody') : null;
            const webhookEmpty = document.getElementById('webhook-empty-state');

            // State
            let apiKey = 'sk-xxxx-xxxx-xxxx'; // Default, replace with fetch
            let apiKeyMasked = true;

            // Fetch API key and webhooks (simulate async)
            async function fetchApiConsole() {
              // TODO: Replace with real backend call
              // Simulate: { apiKey, webhookLogs }
              const data = {
                apiKey: 'sk-1234-5678-ABCD',
                webhookLogs: [
                  { status: 'success', timestamp: '2025-12-27 13:00', lead: 'Acme Corp' },
                  { status: 'fail', timestamp: '2025-12-27 12:30', lead: 'Globex' }
                ]
              };
              apiKey = data.apiKey;
              updateApiKeyField();
              renderWebhooks(data.webhookLogs);
            }

            function updateApiKeyField() {
              apiKeyField.value = apiKeyMasked ? apiKey.replace(/.(?=.{4})/g, '•') : apiKey;
            }

            // Copy API key
            copyBtn && copyBtn.addEventListener('click', function () {
              navigator.clipboard.writeText(apiKey);
              copyBtn.innerHTML = '<i data-lucide="check" class="w-5 h-5"></i> Copied';
              setTimeout(() => {
                copyBtn.innerHTML = '<i data-lucide="copy" class="w-5 h-5"></i> Copy';
                if (window.lucide) lucide.createIcons();
              }, 1200);
              if (window.lucide) lucide.createIcons();
            });

            // Show/hide API key
            showBtn && showBtn.addEventListener('click', function () {
              apiKeyMasked = !apiKeyMasked;
              updateApiKeyField();
              showBtn.textContent = apiKeyMasked ? 'Show' : 'Hide';
            });

            // Regenerate API key (modal)
            regenBtn && regenBtn.addEventListener('click', function () {
              modal.classList.remove('hidden');
            });
            cancelRegen && cancelRegen.addEventListener('click', function () {
              modal.classList.add('hidden');
            });
            confirmRegen && confirmRegen.addEventListener('click', async function () {
              // TODO: Replace with real backend call
              apiKey = 'sk-' + Math.random().toString(36).slice(2, 10).toUpperCase();
              apiKeyMasked = true;
              updateApiKeyField();
              showBtn.textContent = 'Show';
              modal.classList.add('hidden');
              copyBtn.innerHTML = '<i data-lucide="copy" class="w-5 h-5"></i> Copy';
              if (window.lucide) lucide.createIcons();
            });

            // Render webhooks
            function renderWebhooks(logs) {
              if (!webhookTbody) return;
              webhookTbody.innerHTML = '';
              if (!logs || logs.length === 0) {
                webhookTable.classList.add('hidden');
                webhookEmpty.classList.remove('hidden');
              } else {
                webhookTable.classList.remove('hidden');
                webhookEmpty.classList.add('hidden');
                logs.forEach(log => {
                  const icon = log.status === 'success'
                    ? `<i data-lucide='check-circle' class='w-5 h-5 text-green-500'></i>`
                    : `<i data-lucide='x-circle' class='w-5 h-5 text-red-500'></i>`;
                  webhookTbody.innerHTML += `<tr><td class='px-4 py-2'>${icon}</td><td class='px-4 py-2'>${log.timestamp}</td><td class='px-4 py-2 text-zinc-100'>${log.lead}</td></tr>`;
                });
                if (window.lucide) lucide.createIcons();
              }
            }

            // Only fetch if API Console is visible
            if (location.hash === '#settings-api') fetchApiConsole();
            window.addEventListener('hashchange', function () {
              if (location.hash === '#settings-api') fetchApiConsole();
            });
          });
        </script>
    <!-- Products & Services Section -->
    <section class="bg-zinc-950 py-20 px-4">
      <div class="max-w-6xl mx-auto">
        <h2 class="text-3xl md:text-4xl font-extrabold text-zinc-100 mb-12 text-center tracking-tight">Products & Services</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <!-- Service 1: Daily Telegram Signal -->
          <div class="border border-zinc-800 bg-zinc-900/60 rounded-2xl p-8 flex flex-col h-full">
            <span class="text-xs uppercase tracking-widest text-indigo-400 font-bold mb-2">Free</span>
            <h3 class="text-xl font-semibold text-zinc-100 mb-2">Daily Telegram Signal</h3>
            <p class="text-zinc-400 mb-3">One "Hot" lead daily with a hiring probability &gt;90%.</p>
            <ul class="text-zinc-400 text-sm mb-6 flex-1">
              <li class="mb-1"><span class="font-medium text-zinc-200">Advantage:</span> Instant mobile notifications. No need to check the dashboard.</li>
              <li><span class="font-medium text-zinc-200">Result:</span> Real-time awareness of the most urgent market opportunities.</li>
            </ul>
            <a href="https://t.me/PulseB2B_Bot" target="_blank" class="mt-auto inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-5 py-2 rounded-lg shadow transition text-center">Join Telegram Bot</a>
          </div>
          <!-- Service 2: Weekly Radar PDF -->
          <div class="border border-zinc-800 bg-zinc-900/60 rounded-2xl p-8 flex flex-col h-full">
            <span class="text-xs uppercase tracking-widest text-indigo-400 font-bold mb-2">Free</span>
            <h3 class="text-xl font-semibold text-zinc-100 mb-2">The Weekly Radar PDF</h3>
            <p class="text-zinc-400 mb-3">A curated report featuring the top 10 opportunities per region.</p>
            <ul class="text-zinc-400 text-sm mb-6 flex-1">
              <li class="mb-1"><span class="font-medium text-zinc-200">Advantage:</span> Deep-dive analysis of regional trends (US, Canada, LATAM).</li>
              <li><span class="font-medium text-zinc-200">Result:</span> Strategic overview for long-term sales planning.</li>
            </ul>
            <a href="#" onclick="alert('Coming soon! Request your sample via Telegram.')" class="mt-auto inline-block bg-zinc-800 hover:bg-zinc-700 text-zinc-100 font-bold px-5 py-2 rounded-lg shadow transition text-center">Download Sample</a>
          </div>
          <!-- Service 3: Dashboard Pro -->
          <div class="border border-zinc-800 bg-zinc-900/60 rounded-2xl p-8 flex flex-col h-full ring-1 ring-indigo-500 relative">
            <span class="absolute top-4 right-4 bg-indigo-600 text-white text-xs px-3 py-1 rounded-full font-bold shadow">Most Popular</span>
            <span class="text-xs uppercase tracking-widest text-indigo-400 font-bold mb-2">$29/mo</span>
            <h3 class="text-xl font-semibold text-zinc-100 mb-2">Dashboard Pro</h3>
            <p class="text-zinc-400 mb-3">Total access to the live database, granular filters (Country, Tech Stack), and CSV exports.</p>
            <ul class="text-zinc-400 text-sm mb-6 flex-1">
              <li class="mb-1"><span class="font-medium text-zinc-200">Advantage:</span> Full control over your prospecting pipeline.</li>
              <li><span class="font-medium text-zinc-200">Result:</span> 10x faster lead qualification and direct CRM integration.</li>
            </ul>
            <a href="https://buy.stripe.com/8wM3eQ0bA2gQ2wQbII" target="_blank" class="mt-auto inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-5 py-2 rounded-lg shadow transition text-center">Start Pro</a>
          </div>
          <!-- Service 4: Custom Alert API -->
          <div class="border border-zinc-800 bg-zinc-900/60 rounded-2xl p-8 flex flex-col h-full">
            <span class="text-xs uppercase tracking-widest text-indigo-400 font-bold mb-2">$199/mo</span>
            <h3 class="text-xl font-semibold text-zinc-100 mb-2">Custom Alert API</h3>
            <p class="text-zinc-400 mb-3">Direct Webhooks to your Slack or CRM.</p>
            <ul class="text-zinc-400 text-sm mb-6 flex-1">
              <li class="mb-1"><span class="font-medium text-zinc-200">Advantage:</span> Zero-latency data delivery.</li>
              <li><span class="font-medium text-zinc-200">Result:</span> Full workflow automation for high-volume sales teams.</li>
            </ul>
            <a href="#" onclick="window.location.href='/signup'" class="mt-auto inline-block bg-zinc-800 hover:bg-zinc-700 text-zinc-100 font-bold px-5 py-2 rounded-lg shadow transition text-center">Contact Sales</a>
          </div>
        </div>
      </div>
    </section>
</html>
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>workspace</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <div id="app"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="/src/main.js"></script>
    <script type="module" src="/src/main.js"></script>
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Frontend Bootstrap Simple</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <nav class="mb-4">
      <ul class="nav nav-pills justify-content-center gap-2">
        <li class="nav-item"><a href="#tareas" class="nav-link active" data-bs-toggle="tab">Tareas</a></li>
        <li class="nav-item"><a href="#usuarios" class="nav-link" data-bs-toggle="tab">Usuarios</a></li>
        <li class="nav-item"><a href="#dashboard" class="nav-link" data-bs-toggle="tab">Dashboard</a></li>
        <li class="nav-item"><a href="#configuracion" class="nav-link" data-bs-toggle="tab">Configuración</a></li>
      </ul>
    </nav>
    <div class="tab-content">
      <div class="tab-pane fade show active" id="tareas">
        <h1 class="mb-4 text-center">Gestión de Tareas</h1>
        <form class="mb-4" id="task-form">
          <div class="input-group">
            <input id="task-input" type="text" class="form-control" placeholder="Nueva tarea" />
            <button class="btn btn-success" type="submit">Agregar</button>
          </div>
        </form>
        <div id="task-loading" class="text-center my-4" style="display:none">
          <span class="text-blue-600">Cargando tareas...</span>
        </div>
        <div id="task-error" class="text-center my-4 text-red-600" style="display:none"></div>
        <table class="table table-striped table-hover" id="task-table">
          <thead><tr><th>#</th><th>Tarea</th><th>Completada</th><th>Acciones</th></tr></thead>
          <tbody id="task-tbody"></tbody>
        </table>
      </div>
      <div class="tab-pane fade" id="usuarios">
        <h2 class="mb-4">Usuarios</h2>
        <form class="mb-3" id="user-form">
          <div class="row g-2">
            <div class="col-md-4"><input id="user-name" type="text" class="form-control" placeholder="Nombre" /></div>
            <div class="col-md-4"><input id="user-email" type="email" class="form-control" placeholder="Email" /></div>
            <div class="col-md-4"><button class="btn btn-primary w-100" type="submit">Agregar usuario</button></div>
          </div>
        </form>
        <div id="user-loading" class="text-center my-4" style="display:none">
          <span class="text-blue-600">Cargando usuarios...</span>
        </div>
        <div id="user-error" class="text-center my-4 text-red-600" style="display:none"></div>
        <table class="table table-bordered table-hover" id="user-table">
          <thead><tr><th>ID</th><th>Nombre</th><th>Email</th><th>Acciones</th></tr></thead>
          <tbody id="user-tbody"></tbody>
        </table>
        <script>
          // --- TAREAS ---
          const taskForm = document.getElementById('task-form');
          const taskInput = document.getElementById('task-input');
          const taskTbody = document.getElementById('task-tbody');
          let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');

          function renderTasks() {
            taskTbody.innerHTML = '';
            tasks.forEach((task, i) => {
              const tr = document.createElement('tr');
              tr.innerHTML = `<td>${i + 1}</td><td>${task.title}</td><td><input type='checkbox' ${task.completed ? 'checked' : ''} onchange='toggleTask(${i})'></td><td><button class='btn btn-sm btn-danger' onclick='deleteTask(${i})'>Eliminar</button></td>`;
              taskTbody.appendChild(tr);
            });
            document.getElementById('dashboard-tasks-count').textContent = tasks.length;
          }
          function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
          }
          taskForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const value = taskInput.value.trim();
            if (!value) return;
            tasks.push({ title: value, completed: false });
            saveTasks();
            renderTasks();
            taskInput.value = '';
          });
          window.deleteTask = function(i) {
            tasks.splice(i, 1);
            saveTasks();
            renderTasks();
          }
          window.toggleTask = function(i) {
            tasks[i].completed = !tasks[i].completed;
            saveTasks();
            renderTasks();
          }
          renderTasks();

          // --- USUARIOS ---
          const userForm = document.getElementById('user-form');
          const userName = document.getElementById('user-name');
          const userEmail = document.getElementById('user-email');
          const userTbody = document.getElementById('user-tbody');
          let users = JSON.parse(localStorage.getItem('users') || '[]');

          function renderUsers() {
            userTbody.innerHTML = '';
            users.forEach((user, i) => {
              const tr = document.createElement('tr');
              tr.innerHTML = `<td>${i + 1}</td><td>${user.name}</td><td>${user.email}</td><td><button class='btn btn-sm btn-danger' onclick='deleteUser(${i})'>Eliminar</button></td>`;
              userTbody.appendChild(tr);
            });
            document.getElementById('dashboard-users-count').textContent = users.length;
          }
          function saveUsers() {
            localStorage.setItem('users', JSON.stringify(users));
          }
          userForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const name = userName.value.trim();
            const email = userEmail.value.trim();
            if (!name || !email) return;
            users.push({ name, email });
            saveUsers();
            renderUsers();
            userName.value = '';
            userEmail.value = '';
          });
          window.deleteUser = function(i) {
            users.splice(i, 1);
            saveUsers();
            renderUsers();
          }
          renderUsers();

          // --- DASHBOARD ---
          function updateDashboard() {
            const dash = document.getElementById('dashboard');
            if (!dash) return;
            dash.querySelector('.card-title').textContent = `Tareas (${tasks.length})`;
            dash.querySelectorAll('.card-title')[1].textContent = `Usuarios (${users.length})`;
          }
          // Actualizar dashboard al cambiar tareas/usuarios
          function updateAll() {
            renderTasks();
            renderUsers();
            updateDashboard();
          }
          // Llamar updateDashboard después de render inicial
          updateDashboard();
          // Actualizar dashboard cada vez que se cambia de tab
          document.querySelectorAll('a[data-bs-toggle="tab"]').forEach(tab => {
            tab.addEventListener('shown.bs.tab', updateDashboard);
          });
        </script>
      </div>
      <div class="tab-pane fade" id="dashboard">
        <h1 class="mb-4 text-center">Dashboard</h1>
        <div class="row">
          <div class="col-md-6 mb-3">
            <div class="card text-bg-primary">
              <div class="card-body">
                <h5 class="card-title">Tareas</h5>
                <p class="card-text">Acceso rápido a la gestión de tareas.</p>
              </div>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="card text-bg-success">
              <div class="card-body">
                <h5 class="card-title">Usuarios</h5>
                <p class="card-text">Ver y administrar usuarios.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="configuracion">
        <h1 class="mb-4 text-center">Configuración</h1>
        <form class="mb-4">
          <div class="mb-3">
            <label for="email" class="form-label">Email de notificaciones</label>
            <input type="email" class="form-control" id="email" placeholder="usuario@ejemplo.com" />
          </div>
          <div class="mb-3">
            <label for="theme" class="form-label">Tema</label>
            <select class="form-select" id="theme">
              <option>Claro</option>
              <option>Oscuro</option>
            </select>
          </div>
          <button class="btn btn-primary" type="submit">Guardar</button>
        </form>
        <div class="alert alert-info">Esta pantalla es solo un ejemplo de configuración.</div>
      </div>
    </div>
  </div>
    <!-- Benefits Section (Value Grid) -->
    <section class="max-w-5xl mx-auto mt-24 px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Card 1: Timing -->
        <div class="border border-zinc-800 bg-zinc-900/50 p-6 rounded-2xl flex flex-col items-start">
          <div class="mb-4">
            <i data-lucide="alarm-clock" class="w-8 h-8 text-indigo-500"></i>
          </div>
          <h3 class="font-semibold text-lg mb-2">Beat the Crowd</h3>
          <p class="text-zinc-300 text-sm">Being first is 80% of the sale. PulseB2B alerts you before the competition even knows.</p>
        </div>
        <!-- Card 2: Arbitrage -->
        <div class="border border-zinc-800 bg-zinc-900/50 p-6 rounded-2xl flex flex-col items-start">
          <div class="mb-4">
            <i data-lucide="dollar-sign" class="w-8 h-8 text-indigo-500"></i>
          </div>
          <h3 class="font-semibold text-lg mb-2">Economic Edge</h3>
          <p class="text-zinc-300 text-sm">See the exact savings of hiring in LATAM vs. USA. We calculate your arbitrage advantage in real time.</p>
        </div>
        <!-- Card 3: Stack -->
        <div class="border border-zinc-800 bg-zinc-900/50 p-6 rounded-2xl flex flex-col items-start">
          <div class="mb-4">
            <i data-lucide="layers" class="w-8 h-8 text-indigo-500"></i>
          </div>
          <h3 class="font-semibold text-lg mb-2">Technical Precision</h3>
          <p class="text-zinc-300 text-sm">Knowing their tech stack (React, Node, etc.) makes your pitch 10x more effective and relevant.</p>
        </div>
      </div>
    </section>

    <!-- Comparison Section (Vs Table) -->
    <section class="max-w-3xl mx-auto mt-24 px-4">
      <div class="overflow-x-auto">
        <table class="min-w-full border-separate border-spacing-y-2">
          <thead>
            <tr>
              <th class="text-left text-zinc-400 font-normal">&nbsp;</th>
              <th class="text-left text-zinc-200 font-semibold">Traditional Databases</th>
              <th class="text-left text-indigo-400 font-semibold">PulseB2B</th>
            </tr>
          </thead>
          <tbody class="text-sm">
            <tr>
              <td class="text-zinc-300">Real-time Funding Signals</td>
              <td><i data-lucide="x" class="w-5 h-5 text-red-500"></i></td>
              <td><i data-lucide="check" class="w-5 h-5 text-indigo-500"></i></td>
            </tr>
            <tr>
              <td class="text-zinc-300">LATAM Arbitrage Score</td>
              <td><i data-lucide="x" class="w-5 h-5 text-zinc-500"></i></td>
              <td><i data-lucide="check" class="w-5 h-5 text-indigo-500"></i></td>
            </tr>
            <tr>
              <td class="text-zinc-300">Tech Stack Analysis</td>
              <td><i data-lucide="x" class="w-5 h-5 text-zinc-500"></i></td>
              <td><i data-lucide="check" class="w-5 h-5 text-indigo-500"></i></td>
            </tr>
            <tr class="font-bold">
              <td class="text-zinc-200">Price</td>
              <td class="text-zinc-400">$200+/mo <span class="text-xs font-normal">(Others)</span></td>
              <td class="text-indigo-400">$29/mo <span class="ml-2 bg-indigo-600/90 text-white text-xs px-2 py-0.5 rounded">Founding Member Price</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Trust Section & Footer -->
    <section class="max-w-4xl mx-auto mt-24 px-4">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-8 border border-zinc-800 bg-zinc-900/50 p-6 rounded-2xl">
        <div>
          <h4 class="text-zinc-300 font-semibold mb-2">Regions we track</h4>
          <div class="flex gap-3 grayscale contrast-50">
            <span title="USA"><img src="https://flagcdn.com/us.svg" alt="USA" class="w-7 h-5 rounded shadow" /></span>
            <span title="Canada"><img src="https://flagcdn.com/ca.svg" alt="Canada" class="w-7 h-5 rounded shadow" /></span>
            <span title="Argentina"><img src="https://flagcdn.com/ar.svg" alt="Argentina" class="w-7 h-5 rounded shadow" /></span>
            <span title="Mexico"><img src="https://flagcdn.com/mx.svg" alt="Mexico" class="w-7 h-5 rounded shadow" /></span>
            <span title="Chile"><img src="https://flagcdn.com/cl.svg" alt="Chile" class="w-7 h-5 rounded shadow" /></span>
            <span title="Uruguay"><img src="https://flagcdn.com/uy.svg" alt="Uruguay" class="w-7 h-5 rounded shadow" /></span>
            <span title="Colombia"><img src="https://flagcdn.com/co.svg" alt="Colombia" class="w-7 h-5 rounded shadow" /></span>
            <span title="Costa Rica"><img src="https://flagcdn.com/cr.svg" alt="Costa Rica" class="w-7 h-5 rounded shadow" /></span>
          </div>
        </div>
        <div class="flex flex-col gap-2 text-zinc-400 text-sm">
          <div class="flex gap-4">
            <a href="#" class="hover:text-indigo-400 transition">Terms</a>
            <a href="#" class="hover:text-indigo-400 transition">Privacy</a>
            <a href="#" class="hover:text-indigo-400 transition">API Docs</a>
            <a href="#" class="hover:text-indigo-400 transition">Telegram Bot</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Sticky CTA Footer -->
    <footer class="fixed bottom-0 left-0 w-full bg-zinc-950/95 border-t border-zinc-800 py-4 z-50">
      <div class="max-w-3xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4 px-4">
        <span class="text-zinc-200 font-semibold text-base">Don't let the next Series A slip away. Start for $29 today.</span>
        <a href="#" class="inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-6 py-2 rounded-lg shadow transition">Start Now</a>
      </div>
    </footer>

    <script>
      // Lucide icons init (if not already present)
      if (window.lucide) lucide.createIcons();
      else {
        const script = document.createElement('script');
        script.src = 'https://unpkg.com/lucide@latest/dist/umd/lucide.min.js';
        script.onload = () => lucide.createIcons();
        document.body.appendChild(script);
      }
    </script>
</body>
</html>
