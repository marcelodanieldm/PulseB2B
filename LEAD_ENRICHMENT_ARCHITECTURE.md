# Lead Enrichment System Architecture

Visual diagrams and architecture overview for the Lead Enrichment & Prioritization System.

---

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PULSEB2B PLATFORM                            â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚  User Signup    â”‚                                               â”‚
â”‚  â”‚  Form/Auth      â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚           â”‚                                                         â”‚
â”‚           â”‚ POST /api/webhooks/user-signup                          â”‚
â”‚           â”‚ { userId, email }                                       â”‚
â”‚           â”‚                                                         â”‚
â”‚           â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               WEBHOOK SERVER (Port 3001)                    â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  â€¢ Receives signup event                                   â”‚  â”‚
â”‚  â”‚  â€¢ Returns 200 immediately (non-blocking)                  â”‚  â”‚
â”‚  â”‚  â€¢ Triggers enrichment pipeline asynchronously             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ENRICHMENT PIPELINE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STAGE 1: COMPANY ENRICHMENT                               â”‚
    â”‚  (lead_enrichment_service.js)                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
         Email: john@acme.com
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Extract Domain      â”‚ â†’ acme.com
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check Generic?      â”‚ â†’ NO (not gmail.com)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Try... â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1ï¸âƒ£  Clearbit Company API                     â”‚
    â”‚    âœ… SUCCESS (comprehensive data)           â”‚
    â”‚                                              â”‚
    â”‚    Retrieved:                                â”‚
    â”‚    â€¢ Company Name: Acme Software Solutions   â”‚
    â”‚    â€¢ Employees: 850                          â”‚
    â”‚    â€¢ Industry: Software Development          â”‚
    â”‚    â€¢ Revenue: $75,000,000                    â”‚
    â”‚    â€¢ Tech Stack: [React, Node, Python, AWS]  â”‚
    â”‚    â€¢ Location: San Francisco, CA             â”‚
    â”‚    â€¢ LinkedIn: linkedin.com/company/acme     â”‚
    â”‚    â€¢ Founded: 2015                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
         (If fails)
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2ï¸âƒ£  Hunter.io Domain Search API              â”‚
    â”‚    (Fallback - basic data)                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
         (If fails)
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3ï¸âƒ£  Basic DNS Validation                     â”‚
    â”‚    (Last resort - domain only)               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Store in Supabase:                           â”‚
    â”‚ company_enrichment table                     â”‚
    â”‚                                              â”‚
    â”‚ â€¢ user_id: user-123                          â”‚
    â”‚ â€¢ email_domain: acme.com                     â”‚
    â”‚ â€¢ company_name: Acme Software Solutions      â”‚
    â”‚ â€¢ employee_count: 850                        â”‚
    â”‚ â€¢ industry: Software Development             â”‚
    â”‚ â€¢ estimated_revenue: 75000000                â”‚
    â”‚ â€¢ tech_stack: [React, Node, Python, AWS]     â”‚
    â”‚ â€¢ enrichment_source: clearbit                â”‚
    â”‚ â€¢ is_generic_provider: false                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STAGE 2: LEAD SCORING                                     â”‚
    â”‚  (lead_scoring_engine.js)                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    Fetch user + company data
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Calculate Component Scores                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1ï¸âƒ£  Employee Score                  â”‚
    â”‚    850 employees â†’ 90 points        â”‚
    â”‚    (1000+ = 100, 500-999 = 90, ...) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2ï¸âƒ£  Industry Score                  â”‚
    â”‚    Software Development â†’ 50 points â”‚
    â”‚    (Software/SaaS = 50, Tech = 50)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3ï¸âƒ£  Job Role Score                  â”‚
    â”‚    CTO â†’ 50 points                  â”‚
    â”‚    (CEO/CTO = 50, VP = 45, ...)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4ï¸âƒ£  Revenue Multiplier              â”‚
    â”‚    $75M â†’ 1.4x                      â”‚
    â”‚    (100M+ = 1.5x, 50-100M = 1.4x)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5ï¸âƒ£  Software Factory Bonus          â”‚
    â”‚    Keywords match â†’ +25 points      â”‚
    â”‚    "software", "saas", "tech", ...  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 6ï¸âƒ£  Tech Stack Bonus                â”‚
    â”‚    4 techs Ã— 5 pts â†’ +20 points     â”‚
    â”‚    (Max 5 techs = 25 points)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ CALCULATE TOTAL SCORE                        â”‚
    â”‚                                              â”‚
    â”‚ Formula:                                     â”‚
    â”‚ (Employee + Industry + Role) Ã— Revenue       â”‚
    â”‚ + Software Factory + Tech Stack              â”‚
    â”‚                                              â”‚
    â”‚ = (90 + 50 + 50) Ã— 1.4 + 25 + 20             â”‚
    â”‚ = 190 Ã— 1.4 + 45                             â”‚
    â”‚ = 266 + 45                                   â”‚
    â”‚ = 311 points                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Determine Priority Tier                      â”‚
    â”‚                                              â”‚
    â”‚ 311 points â†’ CRITICAL â­                      â”‚
    â”‚                                              â”‚
    â”‚ Tiers:                                       â”‚
    â”‚ â€¢ CRITICAL: 250+ (Top 1%)                    â”‚
    â”‚ â€¢ HIGH: 200-249 (Top 5%)                     â”‚
    â”‚ â€¢ MEDIUM: 150-199 (Top 15%)                  â”‚
    â”‚ â€¢ LOW: 100-149 (Top 30%)                     â”‚
    â”‚ â€¢ MINIMAL: <100 (Bottom 70%)                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check High-Value Criteria                    â”‚
    â”‚                                              â”‚
    â”‚ 1. Employees â‰¥ 500? â†’ YES (850)              â”‚
    â”‚ 2. Software Factory? â†’ YES (keyword match)   â”‚
    â”‚                                              â”‚
    â”‚ Result: HIGH VALUE PROSPECT âœ…               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Store in Supabase:                           â”‚
    â”‚ lead_scores table                            â”‚
    â”‚                                              â”‚
    â”‚ â€¢ user_id: user-123                          â”‚
    â”‚ â€¢ total_score: 311                           â”‚
    â”‚ â€¢ priority_tier: CRITICAL                    â”‚
    â”‚ â€¢ employee_score: 90                         â”‚
    â”‚ â€¢ industry_score: 50                         â”‚
    â”‚ â€¢ role_score: 50                             â”‚
    â”‚ â€¢ revenue_multiplier: 1.4                    â”‚
    â”‚ â€¢ software_factory_bonus: 25                 â”‚
    â”‚ â€¢ tech_stack_score: 20                       â”‚
    â”‚ â€¢ is_software_factory: true                  â”‚
    â”‚ â€¢ is_high_value_prospect: true               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STAGE 3: TELEGRAM ALERT                                   â”‚
    â”‚  (telegram_alert_service.js)                               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    Fetch user + company + score data
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check: is_high_value_prospect?               â”‚
    â”‚                                              â”‚
    â”‚ âœ… TRUE â†’ Send Telegram alert                â”‚
    â”‚ âŒ FALSE â†’ Skip (standard prospect)          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ (if TRUE)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Build Rich HTML Message                      â”‚
    â”‚                                              â”‚
    â”‚ ğŸš¨ HIGH VALUE PROSPECT ALERT!                â”‚
    â”‚                                              â”‚
    â”‚ ğŸ¯ Lead Score: 311 (CRITICAL)                â”‚
    â”‚                                              â”‚
    â”‚ ğŸ‘¤ Contact Information:                      â”‚
    â”‚ â€¢ Name: Sarah Johnson                        â”‚
    â”‚ â€¢ Email: cto@acme.com                        â”‚
    â”‚ â€¢ Title: CTO                                 â”‚
    â”‚ â€¢ Signed up: 12/22/2025, 3:45 PM             â”‚
    â”‚                                              â”‚
    â”‚ ğŸ¢ Company Profile:                          â”‚
    â”‚ â€¢ Name: Acme Software Solutions              â”‚
    â”‚ â€¢ Industry: Software Development             â”‚
    â”‚ â€¢ Size: 850 employees â­                     â”‚
    â”‚ â€¢ Revenue: $75.0M                            â”‚
    â”‚ â€¢ Location: San Francisco, CA                â”‚
    â”‚                                              â”‚
    â”‚ ğŸ’¡ Why High Value?                           â”‚
    â”‚ â€¢ âœ… Software Factory                        â”‚
    â”‚ â€¢ âœ… 500+ Employees                          â”‚
    â”‚ â€¢ Score Breakdown:                           â”‚
    â”‚   - Employee: 90 pts                         â”‚
    â”‚   - Industry: 50 pts                         â”‚
    â”‚   - Role: 50 pts                             â”‚
    â”‚   - Revenue Multiplier: 1.4x                 â”‚
    â”‚   - Software Factory: +25                    â”‚
    â”‚   - Tech Stack: +20                          â”‚
    â”‚                                              â”‚
    â”‚ ğŸ¬ Next Actions:                             â”‚
    â”‚ â€¢ Schedule demo call within 24 hours         â”‚
    â”‚ â€¢ Send personalized onboarding email         â”‚
    â”‚ â€¢ Add to high-touch sales sequence           â”‚
    â”‚                                              â”‚
    â”‚ ğŸ”— View Company on LinkedIn                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ POST to Telegram Bot API                     â”‚
    â”‚                                              â”‚
    â”‚ URL: https://api.telegram.org/bot{TOKEN}/    â”‚
    â”‚      sendMessage                             â”‚
    â”‚                                              â”‚
    â”‚ Body:                                        â”‚
    â”‚ {                                            â”‚
    â”‚   "chat_id": "-1001234567890",               â”‚
    â”‚   "text": "<rich_html_message>",             â”‚
    â”‚   "parse_mode": "HTML"                       â”‚
    â”‚ }                                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Store Alert Log in Supabase:                 â”‚
    â”‚ lead_alerts table                            â”‚
    â”‚                                              â”‚
    â”‚ â€¢ user_id: user-123                          â”‚
    â”‚ â€¢ alert_type: high_value_prospect            â”‚
    â”‚ â€¢ alert_tier: CRITICAL                       â”‚
    â”‚ â€¢ lead_score: 311                            â”‚
    â”‚ â€¢ message_sent: <html_message>               â”‚
    â”‚ â€¢ sent_to: -1001234567890                    â”‚
    â”‚ â€¢ sent_at: 2025-12-22 15:45:30               â”‚
    â”‚ â€¢ delivery_status: sent                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Update User Record:                          â”‚
    â”‚                                              â”‚
    â”‚ users table:                                 â”‚
    â”‚ â€¢ enrichment_completed: true                 â”‚
    â”‚ â€¢ last_enriched_at: 2025-12-22 15:45:30      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
         âœ… COMPLETE

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RESULT SUMMARY                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ User signup: john@acme.com (CTO)
â€¢ Company enriched: Acme Software Solutions (850 employees, $75M revenue)
â€¢ Lead score: 311 points (CRITICAL tier)
â€¢ High-value prospect: YES (500+ employees + Software Factory)
â€¢ Telegram alert: SENT âœ…
â€¢ Processing time: ~5 seconds (end-to-end)
â€¢ Next action: Sales team notified via Telegram, demo call scheduled
```

---

## ğŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Email Domain   â”‚
â”‚  acme.com       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Clearbit/Hunter/Basic APIs         â”‚â”€â”€â”€â”€â–¶â”‚  Company Data   â”‚
â”‚                                     â”‚     â”‚  (15+ fields)   â”‚
â”‚  â€¢ Company name                     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ Employee count                   â”‚              â”‚
â”‚  â€¢ Industry/sector                  â”‚              â”‚
â”‚  â€¢ Revenue                          â”‚              â–¼
â”‚  â€¢ Tech stack                       â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ Location                         â”‚     â”‚   Supabase DB   â”‚
â”‚  â€¢ Social links                     â”‚     â”‚  company_       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  enrichment     â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Scoring Algorithm                  â”‚â”€â”€â”€â”€â–¶â”‚  Lead Score     â”‚
â”‚                                     â”‚     â”‚  (6 components) â”‚
â”‚  â€¢ Employee score (0-100)           â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ Industry score (0-50)            â”‚              â”‚
â”‚  â€¢ Role score (0-50)                â”‚              â”‚
â”‚  â€¢ Revenue multiplier (1.0-1.5x)    â”‚              â–¼
â”‚  â€¢ Software Factory bonus (+25)     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ Tech stack bonus (+25)           â”‚     â”‚   Supabase DB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  lead_scores    â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  High-Value Check                   â”‚
â”‚                                     â”‚
â”‚  IF employees â‰¥ 500                 â”‚
â”‚  AND Software Factory = true        â”‚
â”‚  THEN send Telegram alert           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram Bot API                   â”‚â”€â”€â”€â”€â–¶â”‚  Alert Sent     â”‚
â”‚                                     â”‚     â”‚  (Rich HTML)    â”‚
â”‚  â€¢ Build message                    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ POST to Telegram                 â”‚              â”‚
â”‚  â€¢ Log to database                  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â–¼
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚   Supabase DB   â”‚
                                            â”‚  lead_alerts    â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Weekly Digest Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions Cron Job               â”‚
â”‚  Every Monday at 10:00 AM UTC          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Run: telegram_alert_service.js digest â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Query Supabase:                       â”‚
â”‚  Get top 20 leads from last week       â”‚
â”‚                                        â”‚
â”‚  SELECT * FROM lead_scores             â”‚
â”‚  WHERE scored_at >= NOW() - INTERVAL   â”‚
â”‚    '7 days'                            â”‚
â”‚  ORDER BY total_score DESC             â”‚
â”‚  LIMIT 20                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Build Digest Message:                 â”‚
â”‚                                        â”‚
â”‚  ğŸ“Š WEEKLY LEAD DIGEST                 â”‚
â”‚  Week of Dec 16-22, 2025               â”‚
â”‚                                        â”‚
â”‚  ğŸ“ˆ Summary:                           â”‚
â”‚  â€¢ Total New Leads: 47                 â”‚
â”‚  â€¢ High-Value Prospects: 3             â”‚
â”‚  â€¢ Average Score: 142.5                â”‚
â”‚                                        â”‚
â”‚  ğŸ† Top 5 Leads:                       â”‚
â”‚  1. Sarah Johnson (Acme) - 311         â”‚
â”‚  2. Michael Chen (CloudScale) - 270    â”‚
â”‚  3. Emily Rodriguez (DataForge) - 255  â”‚
â”‚  4. David Kim (TechVentures) - 235     â”‚
â”‚  5. Lisa Wang (InnovateCo) - 220       â”‚
â”‚                                        â”‚
â”‚  ğŸ“Š Tier Breakdown:                    â”‚
â”‚  â€¢ CRITICAL: 3 (6%)                    â”‚
â”‚  â€¢ HIGH: 7 (15%)                       â”‚
â”‚  â€¢ MEDIUM: 12 (26%)                    â”‚
â”‚  â€¢ LOW: 15 (32%)                       â”‚
â”‚  â€¢ MINIMAL: 10 (21%)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Send to Telegram Channel              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Database Schema Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USERS TABLE                            â”‚
â”‚  (Extended with enrichment columns)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id (UUID, PK)                                                â”‚
â”‚  email (VARCHAR, UNIQUE)                                      â”‚
â”‚  first_name (VARCHAR)                                         â”‚
â”‚  last_name (VARCHAR)                                          â”‚
â”‚  job_title (VARCHAR) â†â”€â”€â”€ NEW                                â”‚
â”‚  company (VARCHAR) â†â”€â”€â”€ NEW                                  â”‚
â”‚  enrichment_completed (BOOLEAN) â†â”€â”€â”€ NEW                     â”‚
â”‚  last_enriched_at (TIMESTAMPTZ) â†â”€â”€â”€ NEW                     â”‚
â”‚  created_at (TIMESTAMPTZ)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ (FK: user_id)
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                                     â”‚
         â–¼                                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚         COMPANY_ENRICHMENT TABLE                      â”‚      â”‚
â”‚  (1:1 relationship with users)                        â”‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  id (UUID, PK)                                        â”‚      â”‚
â”‚  user_id (UUID, FK â†’ users.id, UNIQUE)                â”‚      â”‚
â”‚  email_domain (VARCHAR)                               â”‚      â”‚
â”‚  company_name (VARCHAR)                               â”‚      â”‚
â”‚  employee_count (INTEGER)                             â”‚      â”‚
â”‚  employee_range (VARCHAR)                             â”‚      â”‚
â”‚  industry (VARCHAR)                                   â”‚      â”‚
â”‚  sector (VARCHAR)                                     â”‚      â”‚
â”‚  estimated_revenue (BIGINT)                           â”‚      â”‚
â”‚  tech_stack (TEXT[])                                  â”‚      â”‚
â”‚  description (TEXT)                                   â”‚      â”‚
â”‚  founded_year (INTEGER)                               â”‚      â”‚
â”‚  location (VARCHAR)                                   â”‚      â”‚
â”‚  logo_url (TEXT)                                      â”‚      â”‚
â”‚  linkedin_url (TEXT)                                  â”‚      â”‚
â”‚  twitter_url (TEXT)                                   â”‚      â”‚
â”‚  enrichment_source (VARCHAR: clearbit/hunter/basic)   â”‚      â”‚
â”‚  is_generic_provider (BOOLEAN)                        â”‚      â”‚
â”‚  enriched_at (TIMESTAMPTZ)                            â”‚      â”‚
â”‚  created_at (TIMESTAMPTZ)                             â”‚      â”‚
â”‚  updated_at (TIMESTAMPTZ)                             â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                                                               â”‚
                                                               â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            LEAD_SCORES TABLE                          â”‚
â”‚  (1:1 relationship with users)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id (UUID, PK)                                        â”‚
â”‚  user_id (UUID, FK â†’ users.id, UNIQUE)                â”‚
â”‚  total_score (DECIMAL)                                â”‚
â”‚  priority_tier (VARCHAR: CRITICAL/HIGH/MEDIUM/LOW)    â”‚
â”‚  employee_score (INTEGER)                             â”‚
â”‚  industry_score (INTEGER)                             â”‚
â”‚  role_score (INTEGER)                                 â”‚
â”‚  revenue_multiplier (DECIMAL)                         â”‚
â”‚  software_factory_bonus (INTEGER)                     â”‚
â”‚  tech_stack_score (INTEGER)                           â”‚
â”‚  is_software_factory (BOOLEAN)                        â”‚
â”‚  is_high_value_prospect (BOOLEAN)                     â”‚
â”‚  scored_at (TIMESTAMPTZ)                              â”‚
â”‚  created_at (TIMESTAMPTZ)                             â”‚
â”‚  updated_at (TIMESTAMPTZ)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ (FK: user_id)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            LEAD_ALERTS TABLE                          â”‚
â”‚  (1:many relationship with users)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id (UUID, PK)                                        â”‚
â”‚  user_id (UUID, FK â†’ users.id)                        â”‚
â”‚  alert_type (VARCHAR)                                 â”‚
â”‚  alert_tier (VARCHAR)                                 â”‚
â”‚  lead_score (DECIMAL)                                 â”‚
â”‚  message_sent (TEXT)                                  â”‚
â”‚  sent_to (VARCHAR: Telegram chat ID)                  â”‚
â”‚  sent_at (TIMESTAMPTZ)                                â”‚
â”‚  delivery_status (VARCHAR: sent/failed/pending)       â”‚
â”‚  created_at (TIMESTAMPTZ)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DATABASE VIEWS                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ high_value_prospects                               â”‚
â”‚    (users + company_enrichment + lead_scores)         â”‚
â”‚    WHERE is_high_value_prospect = TRUE                â”‚
â”‚                                                       â”‚
â”‚  â€¢ lead_pipeline_summary                              â”‚
â”‚    (lead_scores grouped by priority_tier)             â”‚
â”‚                                                       â”‚
â”‚  â€¢ recent_signups_enriched                            â”‚
â”‚    (users from last 7 days with enrichment status)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ API Integration Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EXTERNAL APIs                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Clearbit Enrichment API   â”‚
â”‚  (Primary Source)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Endpoint:               â”‚
â”‚    GET /v2/companies/find  â”‚
â”‚    ?domain=acme.com        â”‚
â”‚                            â”‚
â”‚  â€¢ Auth: Bearer Token      â”‚
â”‚                            â”‚
â”‚  â€¢ Response (95+ fields):  â”‚
â”‚    - name, domain          â”‚
â”‚    - employees, revenue    â”‚
â”‚    - industry, category    â”‚
â”‚    - tech stack (array)    â”‚
â”‚    - founded year          â”‚
â”‚    - location              â”‚
â”‚    - social URLs           â”‚
â”‚    - funding data          â”‚
â”‚                            â”‚
â”‚  â€¢ Cost: $99/month         â”‚
â”‚    (200 requests/day)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ (if fails)
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hunter.io Domain API      â”‚
â”‚  (Fallback Source)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Endpoint:               â”‚
â”‚    GET /v2/domain-search   â”‚
â”‚    ?domain=acme.com        â”‚
â”‚                            â”‚
â”‚  â€¢ Auth: API Key param     â”‚
â”‚                            â”‚
â”‚  â€¢ Response (basic):       â”‚
â”‚    - company name          â”‚
â”‚    - employee count        â”‚
â”‚    - industry              â”‚
â”‚    - LinkedIn URL          â”‚
â”‚    - Twitter URL           â”‚
â”‚                            â”‚
â”‚  â€¢ Cost: FREE              â”‚
â”‚    (50 requests/month)     â”‚
â”‚    $49/month (1000 req)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ (if fails)
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Basic DNS Validation      â”‚
â”‚  (Last Resort)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Node.js dns module      â”‚
â”‚  â€¢ Validate domain exists  â”‚
â”‚  â€¢ No company data         â”‚
â”‚  â€¢ Free (always available) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram Bot API                          â”‚
â”‚  (Alert Delivery)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Endpoint:                               â”‚
â”‚    POST /bot{TOKEN}/sendMessage            â”‚
â”‚                                            â”‚
â”‚  â€¢ Body:                                   â”‚
â”‚    {                                       â”‚
â”‚      "chat_id": "-1001234567890",          â”‚
â”‚      "text": "ğŸš¨ HIGH VALUE PROSPECT...", â”‚
â”‚      "parse_mode": "HTML"                  â”‚
â”‚    }                                       â”‚
â”‚                                            â”‚
â”‚  â€¢ Response:                               â”‚
â”‚    {                                       â”‚
â”‚      "ok": true,                           â”‚
â”‚      "result": {                           â”‚
â”‚        "message_id": 123,                  â”‚
â”‚        "chat": { ... },                    â”‚
â”‚        "date": 1735825530                  â”‚
â”‚      }                                     â”‚
â”‚    }                                       â”‚
â”‚                                            â”‚
â”‚  â€¢ Cost: FREE (unlimited)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Telegram Alert Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PulseB2B Lead Alerts (Private Channel)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  ğŸš¨ HIGH VALUE PROSPECT ALERT! ğŸš¨                  â”‚
â”‚                                                    â”‚
â”‚  ğŸ¯ Lead Score: 311 (CRITICAL)                     â”‚
â”‚                                                    â”‚
â”‚  ğŸ‘¤ Contact Information:                           â”‚
â”‚  â€¢ Name: Sarah Johnson                             â”‚
â”‚  â€¢ Email: cto@acme.com                             â”‚
â”‚  â€¢ Title: CTO                                      â”‚
â”‚  â€¢ Signed up: 12/22/2025, 3:45 PM                  â”‚
â”‚                                                    â”‚
â”‚  ğŸ¢ Company Profile:                               â”‚
â”‚  â€¢ Name: Acme Software Solutions                   â”‚
â”‚  â€¢ Industry: Software Development                  â”‚
â”‚  â€¢ Size: 850 employees â­                          â”‚
â”‚  â€¢ Revenue: $75.0M                                 â”‚
â”‚  â€¢ Location: San Francisco, CA                     â”‚
â”‚                                                    â”‚
â”‚  ğŸ’¡ Why High Value?                                â”‚
â”‚  â€¢ âœ… Software Factory                             â”‚
â”‚  â€¢ âœ… 500+ Employees                               â”‚
â”‚  â€¢ Score Breakdown:                                â”‚
â”‚    - Employee: 90 pts                              â”‚
â”‚    - Industry: 50 pts                              â”‚
â”‚    - Role: 50 pts                                  â”‚
â”‚    - Revenue Multiplier: 1.4x                      â”‚
â”‚    - Software Factory: +25                         â”‚
â”‚    - Tech Stack: +20                               â”‚
â”‚                                                    â”‚
â”‚  ğŸ¬ Next Actions:                                  â”‚
â”‚  â€¢ Schedule demo call within 24 hours              â”‚
â”‚  â€¢ Send personalized onboarding email              â”‚
â”‚  â€¢ Add to high-touch sales sequence                â”‚
â”‚                                                    â”‚
â”‚  ğŸ”— View Company on LinkedIn                       â”‚
â”‚                                                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”          â”‚
â”‚  Sent by PulseB2B Lead Intelligence System         â”‚
â”‚  Dec 22, 2025 at 3:45 PM                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Last Updated:** December 22, 2025  
**Documentation:** [LEAD_ENRICHMENT_SYSTEM.md](LEAD_ENRICHMENT_SYSTEM.md)
